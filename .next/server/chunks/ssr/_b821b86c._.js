module.exports=[25558,(a,b,c)=>{"use strict";let d=["nodebuffer","arraybuffer","fragments"],e="undefined"!=typeof Blob;e&&d.push("blob"),b.exports={BINARY_TYPES:d,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:e,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},54242,(a,b,c)=>{"use strict";let{EMPTY_BUFFER:d}=a.r(25558),e=Buffer[Symbol.species];function f(a,b,c,d,e){for(let f=0;f<e;f++)c[d+f]=a[f]^b[3&f]}function g(a,b){for(let c=0;c<a.length;c++)a[c]^=b[3&c]}function h(a){let b;return(h.readOnly=!0,Buffer.isBuffer(a))?a:(a instanceof ArrayBuffer?b=new e(a):ArrayBuffer.isView(a)?b=new e(a.buffer,a.byteOffset,a.byteLength):(b=Buffer.from(a),h.readOnly=!1),b)}if(b.exports={concat:function(a,b){if(0===a.length)return d;if(1===a.length)return a[0];let c=Buffer.allocUnsafe(b),f=0;for(let b=0;b<a.length;b++){let d=a[b];c.set(d,f),f+=d.length}return f<b?new e(c.buffer,c.byteOffset,f):c},mask:f,toArrayBuffer:function(a){return a.length===a.buffer.byteLength?a.buffer:a.buffer.slice(a.byteOffset,a.byteOffset+a.length)},toBuffer:h,unmask:g},!process.env.WS_NO_BUFFER_UTIL)try{let a=(()=>{let a=Error("Cannot find module 'bufferutil'");throw a.code="MODULE_NOT_FOUND",a})();b.exports.mask=function(b,c,d,e,g){g<48?f(b,c,d,e,g):a.mask(b,c,d,e,g)},b.exports.unmask=function(b,c){b.length<32?g(b,c):a.unmask(b,c)}}catch(a){}},34907,(a,b,c)=>{"use strict";let d=Symbol("kDone"),e=Symbol("kRun");b.exports=class{constructor(a){this[d]=()=>{this.pending--,this[e]()},this.concurrency=a||1/0,this.jobs=[],this.pending=0}add(a){this.jobs.push(a),this[e]()}[e](){if(this.pending!==this.concurrency&&this.jobs.length){let a=this.jobs.shift();this.pending++,a(this[d])}}}},45143,(a,b,c)=>{"use strict";let d,e=a.r(6461),f=a.r(54242),g=a.r(34907),{kStatusCode:h}=a.r(25558),i=Buffer[Symbol.species],j=Buffer.from([0,0,255,255]),k=Symbol("permessage-deflate"),l=Symbol("total-length"),m=Symbol("callback"),n=Symbol("buffers"),o=Symbol("error");function p(a){this[n].push(a),this[l]+=a.length}function q(a){(this[l]+=a.length,this[k]._maxPayload<1||this[l]<=this[k]._maxPayload)?this[n].push(a):(this[o]=RangeError("Max payload size exceeded"),this[o].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[o][h]=1009,this.removeListener("data",q),this.reset())}function r(a){(this[k]._inflate=null,this[o])?this[m](this[o]):(a[h]=1007,this[m](a))}b.exports=class{constructor(a,b,c){this._maxPayload=0|c,this._options=a||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!b,this._deflate=null,this._inflate=null,this.params=null,d||(d=new g(void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10))}static get extensionName(){return"permessage-deflate"}offer(){let a={};return this._options.serverNoContextTakeover&&(a.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(a.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(a.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?a.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(a.client_max_window_bits=!0),a}accept(a){return a=this.normalizeParams(a),this.params=this._isServer?this.acceptAsServer(a):this.acceptAsClient(a),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let a=this._deflate[m];this._deflate.close(),this._deflate=null,a&&a(Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(a){let b=this._options,c=a.find(a=>(!1!==b.serverNoContextTakeover||!a.server_no_context_takeover)&&(!a.server_max_window_bits||!1!==b.serverMaxWindowBits&&("number"!=typeof b.serverMaxWindowBits||!(b.serverMaxWindowBits>a.server_max_window_bits)))&&("number"!=typeof b.clientMaxWindowBits||!!a.client_max_window_bits));if(!c)throw Error("None of the extension offers can be accepted");return b.serverNoContextTakeover&&(c.server_no_context_takeover=!0),b.clientNoContextTakeover&&(c.client_no_context_takeover=!0),"number"==typeof b.serverMaxWindowBits&&(c.server_max_window_bits=b.serverMaxWindowBits),"number"==typeof b.clientMaxWindowBits?c.client_max_window_bits=b.clientMaxWindowBits:(!0===c.client_max_window_bits||!1===b.clientMaxWindowBits)&&delete c.client_max_window_bits,c}acceptAsClient(a){let b=a[0];if(!1===this._options.clientNoContextTakeover&&b.client_no_context_takeover)throw Error('Unexpected parameter "client_no_context_takeover"');if(b.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&b.client_max_window_bits>this._options.clientMaxWindowBits)throw Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(b.client_max_window_bits=this._options.clientMaxWindowBits);return b}normalizeParams(a){return a.forEach(a=>{Object.keys(a).forEach(b=>{let c=a[b];if(c.length>1)throw Error(`Parameter "${b}" must have only a single value`);if(c=c[0],"client_max_window_bits"===b){if(!0!==c){let a=+c;if(!Number.isInteger(a)||a<8||a>15)throw TypeError(`Invalid value for parameter "${b}": ${c}`);c=a}else if(!this._isServer)throw TypeError(`Invalid value for parameter "${b}": ${c}`)}else if("server_max_window_bits"===b){let a=+c;if(!Number.isInteger(a)||a<8||a>15)throw TypeError(`Invalid value for parameter "${b}": ${c}`);c=a}else if("client_no_context_takeover"===b||"server_no_context_takeover"===b){if(!0!==c)throw TypeError(`Invalid value for parameter "${b}": ${c}`)}else throw Error(`Unknown parameter "${b}"`);a[b]=c})}),a}decompress(a,b,c){d.add(d=>{this._decompress(a,b,(a,b)=>{d(),c(a,b)})})}compress(a,b,c){d.add(d=>{this._compress(a,b,(a,b)=>{d(),c(a,b)})})}_decompress(a,b,c){let d=this._isServer?"client":"server";if(!this._inflate){let a=`${d}_max_window_bits`,b="number"!=typeof this.params[a]?e.Z_DEFAULT_WINDOWBITS:this.params[a];this._inflate=e.createInflateRaw({...this._options.zlibInflateOptions,windowBits:b}),this._inflate[k]=this,this._inflate[l]=0,this._inflate[n]=[],this._inflate.on("error",r),this._inflate.on("data",q)}this._inflate[m]=c,this._inflate.write(a),b&&this._inflate.write(j),this._inflate.flush(()=>{let a=this._inflate[o];if(a){this._inflate.close(),this._inflate=null,c(a);return}let e=f.concat(this._inflate[n],this._inflate[l]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[l]=0,this._inflate[n]=[],b&&this.params[`${d}_no_context_takeover`]&&this._inflate.reset()),c(null,e)})}_compress(a,b,c){let d=this._isServer?"server":"client";if(!this._deflate){let a=`${d}_max_window_bits`,b="number"!=typeof this.params[a]?e.Z_DEFAULT_WINDOWBITS:this.params[a];this._deflate=e.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:b}),this._deflate[l]=0,this._deflate[n]=[],this._deflate.on("data",p)}this._deflate[m]=c,this._deflate.write(a),this._deflate.flush(e.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let a=f.concat(this._deflate[n],this._deflate[l]);b&&(a=new i(a.buffer,a.byteOffset,a.length-4)),this._deflate[m]=null,this._deflate[l]=0,this._deflate[n]=[],b&&this.params[`${d}_no_context_takeover`]&&this._deflate.reset(),c(null,a)})}}},57147,(a,b,c)=>{"use strict";let{isUtf8:d}=a.r(874),{hasBlob:e}=a.r(25558);function f(a){let b=a.length,c=0;for(;c<b;)if((128&a[c])==0)c++;else if((224&a[c])==192){if(c+1===b||(192&a[c+1])!=128||(254&a[c])==192)return!1;c+=2}else if((240&a[c])==224){if(c+2>=b||(192&a[c+1])!=128||(192&a[c+2])!=128||224===a[c]&&(224&a[c+1])==128||237===a[c]&&(224&a[c+1])==160)return!1;c+=3}else{if((248&a[c])!=240||c+3>=b||(192&a[c+1])!=128||(192&a[c+2])!=128||(192&a[c+3])!=128||240===a[c]&&(240&a[c+1])==128||244===a[c]&&a[c+1]>143||a[c]>244)return!1;c+=4}return!0}if(b.exports={isBlob:function(a){return e&&"object"==typeof a&&"function"==typeof a.arrayBuffer&&"string"==typeof a.type&&"function"==typeof a.stream&&("Blob"===a[Symbol.toStringTag]||"File"===a[Symbol.toStringTag])},isValidStatusCode:function(a){return a>=1e3&&a<=1014&&1004!==a&&1005!==a&&1006!==a||a>=3e3&&a<=4999},isValidUTF8:f,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},d)b.exports.isValidUTF8=function(a){return a.length<24?f(a):d(a)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let a=(()=>{let a=Error("Cannot find module 'utf-8-validate'");throw a.code="MODULE_NOT_FOUND",a})();b.exports.isValidUTF8=function(b){return b.length<32?f(b):a(b)}}catch(a){}},71345,(a,b,c)=>{"use strict";let{Writable:d}=a.r(88947),e=a.r(45143),{BINARY_TYPES:f,EMPTY_BUFFER:g,kStatusCode:h,kWebSocket:i}=a.r(25558),{concat:j,toArrayBuffer:k,unmask:l}=a.r(54242),{isValidStatusCode:m,isValidUTF8:n}=a.r(57147),o=Buffer[Symbol.species];b.exports=class extends d{constructor(a={}){super(),this._allowSynchronousEvents=void 0===a.allowSynchronousEvents||a.allowSynchronousEvents,this._binaryType=a.binaryType||f[0],this._extensions=a.extensions||{},this._isServer=!!a.isServer,this._maxPayload=0|a.maxPayload,this._skipUTF8Validation=!!a.skipUTF8Validation,this[i]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(a,b,c){if(8===this._opcode&&0==this._state)return c();this._bufferedBytes+=a.length,this._buffers.push(a),this.startLoop(c)}consume(a){if(this._bufferedBytes-=a,a===this._buffers[0].length)return this._buffers.shift();if(a<this._buffers[0].length){let b=this._buffers[0];return this._buffers[0]=new o(b.buffer,b.byteOffset+a,b.length-a),new o(b.buffer,b.byteOffset,a)}let b=Buffer.allocUnsafe(a);do{let c=this._buffers[0],d=b.length-a;a>=c.length?b.set(this._buffers.shift(),d):(b.set(new Uint8Array(c.buffer,c.byteOffset,a),d),this._buffers[0]=new o(c.buffer,c.byteOffset+a,c.length-a)),a-=c.length}while(a>0)return b}startLoop(a){this._loop=!0;do switch(this._state){case 0:this.getInfo(a);break;case 1:this.getPayloadLength16(a);break;case 2:this.getPayloadLength64(a);break;case 3:this.getMask();break;case 4:this.getData(a);break;case 5:case 6:this._loop=!1;return}while(this._loop)this._errored||a()}getInfo(a){if(this._bufferedBytes<2){this._loop=!1;return}let b=this.consume(2);if((48&b[0])!=0)return void a(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"));let c=(64&b[0])==64;if(c&&!this._extensions[e.extensionName])return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._fin=(128&b[0])==128,this._opcode=15&b[0],this._payloadLength=127&b[1],0===this._opcode){if(c)return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(!this._fragmented)return void a(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"));this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return void a(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));this._compressed=c}else{if(!(this._opcode>7)||!(this._opcode<11))return void a(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));if(!this._fin)return void a(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"));if(c)return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength)return void a(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"))}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=(128&b[1])==128,this._isServer){if(!this._masked)return void a(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"))}else if(this._masked)return void a(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"));126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(a)}getPayloadLength16(a){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(a)}getPayloadLength64(a){if(this._bufferedBytes<8){this._loop=!1;return}let b=this.consume(8),c=b.readUInt32BE(0);c>2097151?a(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=0x100000000*c+b.readUInt32BE(4),this.haveLength(a))}haveLength(a){this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)?a(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH")):this._masked?this._state=3:this._state=4}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=4}getData(a){let b=g;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}b=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!=0&&l(b,this._mask)}if(this._opcode>7)return void this.controlMessage(b,a);if(this._compressed){this._state=5,this.decompress(b,a);return}b.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(b)),this.dataMessage(a)}decompress(a,b){this._extensions[e.extensionName].decompress(a,this._fin,(a,c)=>{if(a)return b(a);if(c.length){if(this._messageLength+=c.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return void b(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(c)}this.dataMessage(b),0===this._state&&this.startLoop(b)})}dataMessage(a){if(!this._fin){this._state=0;return}let b=this._messageLength,c=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let d;d="nodebuffer"===this._binaryType?j(c,b):"arraybuffer"===this._binaryType?k(j(c,b)):"blob"===this._binaryType?new Blob(c):c,this._allowSynchronousEvents?(this.emit("message",d,!0),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",d,!0),this._state=0,this.startLoop(a)}))}else{let d=j(c,b);if(!this._skipUTF8Validation&&!n(d))return void a(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));5===this._state||this._allowSynchronousEvents?(this.emit("message",d,!1),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",d,!1),this._state=0,this.startLoop(a)}))}}controlMessage(a,b){if(8===this._opcode){if(0===a.length)this._loop=!1,this.emit("conclude",1005,g),this.end();else{let c=a.readUInt16BE(0);if(!m(c))return void b(this.createError(RangeError,`invalid status code ${c}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE"));let d=new o(a.buffer,a.byteOffset+2,a.length-2);if(!this._skipUTF8Validation&&!n(d))return void b(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));this._loop=!1,this.emit("conclude",c,d),this.end()}this._state=0;return}this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",a),this._state=0):(this._state=6,setImmediate(()=>{this.emit(9===this._opcode?"ping":"pong",a),this._state=0,this.startLoop(b)}))}createError(a,b,c,d,e){this._loop=!1,this._errored=!0;let f=new a(c?`Invalid WebSocket frame: ${b}`:b);return Error.captureStackTrace(f,this.createError),f.code=e,f[h]=d,f}}},78583,(a,b,c)=>{"use strict";let d,{Duplex:e}=a.r(88947),{randomFillSync:f}=a.r(54799),g=a.r(45143),{EMPTY_BUFFER:h,kWebSocket:i,NOOP:j}=a.r(25558),{isBlob:k,isValidStatusCode:l}=a.r(57147),{mask:m,toBuffer:n}=a.r(54242),o=Symbol("kByteLength"),p=Buffer.alloc(4),q=8192;class r{constructor(a,b,c){this._extensions=b||{},c&&(this._generateMask=c,this._maskBuffer=Buffer.alloc(4)),this._socket=a,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=0,this.onerror=j,this[i]=void 0}static frame(a,b){let c,e,g=!1,h=2,i=!1;b.mask&&(c=b.maskBuffer||p,b.generateMask?b.generateMask(c):(8192===q&&(void 0===d&&(d=Buffer.alloc(8192)),f(d,0,8192),q=0),c[0]=d[q++],c[1]=d[q++],c[2]=d[q++],c[3]=d[q++]),i=(c[0]|c[1]|c[2]|c[3])==0,h=6),"string"==typeof a?e=(!b.mask||i)&&void 0!==b[o]?b[o]:(a=Buffer.from(a)).length:(e=a.length,g=b.mask&&b.readOnly&&!i);let j=e;e>=65536?(h+=8,j=127):e>125&&(h+=2,j=126);let k=Buffer.allocUnsafe(g?e+h:h);return(k[0]=b.fin?128|b.opcode:b.opcode,b.rsv1&&(k[0]|=64),k[1]=j,126===j?k.writeUInt16BE(e,2):127===j&&(k[2]=k[3]=0,k.writeUIntBE(e,4,6)),b.mask)?(k[1]|=128,k[h-4]=c[0],k[h-3]=c[1],k[h-2]=c[2],k[h-1]=c[3],i)?[k,a]:g?(m(a,c,k,h,e),[k]):(m(a,c,a,0,e),[k,a]):[k,a]}close(a,b,c,d){let e;if(void 0===a)e=h;else if("number"==typeof a&&l(a))if(void 0!==b&&b.length){let c=Buffer.byteLength(b);if(c>123)throw RangeError("The message must not be greater than 123 bytes");(e=Buffer.allocUnsafe(2+c)).writeUInt16BE(a,0),"string"==typeof b?e.write(b,2):e.set(b,2)}else(e=Buffer.allocUnsafe(2)).writeUInt16BE(a,0);else throw TypeError("First argument must be a valid error code number");let f={[o]:e.length,fin:!0,generateMask:this._generateMask,mask:c,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};0!==this._state?this.enqueue([this.dispatch,e,!1,f,d]):this.sendFrame(r.frame(e,f),d)}ping(a,b,c){let d,e;if("string"==typeof a?(d=Buffer.byteLength(a),e=!1):k(a)?(d=a.size,e=!1):(d=(a=n(a)).length,e=n.readOnly),d>125)throw RangeError("The data size must not be greater than 125 bytes");let f={[o]:d,fin:!0,generateMask:this._generateMask,mask:b,maskBuffer:this._maskBuffer,opcode:9,readOnly:e,rsv1:!1};k(a)?0!==this._state?this.enqueue([this.getBlobData,a,!1,f,c]):this.getBlobData(a,!1,f,c):0!==this._state?this.enqueue([this.dispatch,a,!1,f,c]):this.sendFrame(r.frame(a,f),c)}pong(a,b,c){let d,e;if("string"==typeof a?(d=Buffer.byteLength(a),e=!1):k(a)?(d=a.size,e=!1):(d=(a=n(a)).length,e=n.readOnly),d>125)throw RangeError("The data size must not be greater than 125 bytes");let f={[o]:d,fin:!0,generateMask:this._generateMask,mask:b,maskBuffer:this._maskBuffer,opcode:10,readOnly:e,rsv1:!1};k(a)?0!==this._state?this.enqueue([this.getBlobData,a,!1,f,c]):this.getBlobData(a,!1,f,c):0!==this._state?this.enqueue([this.dispatch,a,!1,f,c]):this.sendFrame(r.frame(a,f),c)}send(a,b,c){let d,e,f=this._extensions[g.extensionName],h=b.binary?2:1,i=b.compress;"string"==typeof a?(d=Buffer.byteLength(a),e=!1):k(a)?(d=a.size,e=!1):(d=(a=n(a)).length,e=n.readOnly),this._firstFragment?(this._firstFragment=!1,i&&f&&f.params[f._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(i=d>=f._threshold),this._compress=i):(i=!1,h=0),b.fin&&(this._firstFragment=!0);let j={[o]:d,fin:b.fin,generateMask:this._generateMask,mask:b.mask,maskBuffer:this._maskBuffer,opcode:h,readOnly:e,rsv1:i};k(a)?0!==this._state?this.enqueue([this.getBlobData,a,this._compress,j,c]):this.getBlobData(a,this._compress,j,c):0!==this._state?this.enqueue([this.dispatch,a,this._compress,j,c]):this.dispatch(a,this._compress,j,c)}getBlobData(a,b,c,d){this._bufferedBytes+=c[o],this._state=2,a.arrayBuffer().then(a=>{if(this._socket.destroyed){let a=Error("The socket was closed while the blob was being read");process.nextTick(s,this,a,d);return}this._bufferedBytes-=c[o];let e=n(a);b?this.dispatch(e,b,c,d):(this._state=0,this.sendFrame(r.frame(e,c),d),this.dequeue())}).catch(a=>{process.nextTick(t,this,a,d)})}dispatch(a,b,c,d){if(!b)return void this.sendFrame(r.frame(a,c),d);let e=this._extensions[g.extensionName];this._bufferedBytes+=c[o],this._state=1,e.compress(a,c.fin,(a,b)=>{this._socket.destroyed?s(this,Error("The socket was closed while data was being compressed"),d):(this._bufferedBytes-=c[o],this._state=0,c.readOnly=!1,this.sendFrame(r.frame(b,c),d),this.dequeue())})}dequeue(){for(;0===this._state&&this._queue.length;){let a=this._queue.shift();this._bufferedBytes-=a[3][o],Reflect.apply(a[0],this,a.slice(1))}}enqueue(a){this._bufferedBytes+=a[3][o],this._queue.push(a)}sendFrame(a,b){2===a.length?(this._socket.cork(),this._socket.write(a[0]),this._socket.write(a[1],b),this._socket.uncork()):this._socket.write(a[0],b)}}function s(a,b,c){"function"==typeof c&&c(b);for(let c=0;c<a._queue.length;c++){let d=a._queue[c],e=d[d.length-1];"function"==typeof e&&e(b)}}function t(a,b,c){s(a,b,c),a.onerror(b)}b.exports=r},21392,(a,b,c)=>{"use strict";let{kForOnEventAttribute:d,kListener:e}=a.r(25558),f=Symbol("kCode"),g=Symbol("kData"),h=Symbol("kError"),i=Symbol("kMessage"),j=Symbol("kReason"),k=Symbol("kTarget"),l=Symbol("kType"),m=Symbol("kWasClean");class n{constructor(a){this[k]=null,this[l]=a}get target(){return this[k]}get type(){return this[l]}}Object.defineProperty(n.prototype,"target",{enumerable:!0}),Object.defineProperty(n.prototype,"type",{enumerable:!0});class o extends n{constructor(a,b={}){super(a),this[f]=void 0===b.code?0:b.code,this[j]=void 0===b.reason?"":b.reason,this[m]=void 0!==b.wasClean&&b.wasClean}get code(){return this[f]}get reason(){return this[j]}get wasClean(){return this[m]}}Object.defineProperty(o.prototype,"code",{enumerable:!0}),Object.defineProperty(o.prototype,"reason",{enumerable:!0}),Object.defineProperty(o.prototype,"wasClean",{enumerable:!0});class p extends n{constructor(a,b={}){super(a),this[h]=void 0===b.error?null:b.error,this[i]=void 0===b.message?"":b.message}get error(){return this[h]}get message(){return this[i]}}Object.defineProperty(p.prototype,"error",{enumerable:!0}),Object.defineProperty(p.prototype,"message",{enumerable:!0});class q extends n{constructor(a,b={}){super(a),this[g]=void 0===b.data?null:b.data}get data(){return this[g]}}function r(a,b,c){"object"==typeof a&&a.handleEvent?a.handleEvent.call(a,c):a.call(b,c)}Object.defineProperty(q.prototype,"data",{enumerable:!0}),b.exports={CloseEvent:o,ErrorEvent:p,Event:n,EventTarget:{addEventListener(a,b,c={}){let f;for(let f of this.listeners(a))if(!c[d]&&f[e]===b&&!f[d])return;if("message"===a)f=function(a,c){let d=new q("message",{data:c?a:a.toString()});d[k]=this,r(b,this,d)};else if("close"===a)f=function(a,c){let d=new o("close",{code:a,reason:c.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});d[k]=this,r(b,this,d)};else if("error"===a)f=function(a){let c=new p("error",{error:a,message:a.message});c[k]=this,r(b,this,c)};else{if("open"!==a)return;f=function(){let a=new n("open");a[k]=this,r(b,this,a)}}f[d]=!!c[d],f[e]=b,c.once?this.once(a,f):this.on(a,f)},removeEventListener(a,b){for(let c of this.listeners(a))if(c[e]===b&&!c[d]){this.removeListener(a,c);break}}},MessageEvent:q}},43017,(a,b,c)=>{"use strict";let{tokenChars:d}=a.r(57147);function e(a,b,c){void 0===a[b]?a[b]=[c]:a[b].push(c)}b.exports={format:function(a){return Object.keys(a).map(b=>{let c=a[b];return Array.isArray(c)||(c=[c]),c.map(a=>[b].concat(Object.keys(a).map(b=>{let c=a[b];return Array.isArray(c)||(c=[c]),c.map(a=>!0===a?b:`${b}=${a}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(a){let b,c,f=Object.create(null),g=Object.create(null),h=!1,i=!1,j=!1,k=-1,l=-1,m=-1,n=0;for(;n<a.length;n++)if(l=a.charCodeAt(n),void 0===b)if(-1===m&&1===d[l])-1===k&&(k=n);else if(0!==n&&(32===l||9===l))-1===m&&-1!==k&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n);let c=a.slice(k,m);44===l?(e(f,c,g),g=Object.create(null)):b=c,k=m=-1}else throw SyntaxError(`Unexpected character at index ${n}`);else if(void 0===c)if(-1===m&&1===d[l])-1===k&&(k=n);else if(32===l||9===l)-1===m&&-1!==k&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n),e(g,a.slice(k,m),!0),44===l&&(e(f,b,g),g=Object.create(null),b=void 0),k=m=-1}else if(61===l&&-1!==k&&-1===m)c=a.slice(k,n),k=m=-1;else throw SyntaxError(`Unexpected character at index ${n}`);else if(i){if(1!==d[l])throw SyntaxError(`Unexpected character at index ${n}`);-1===k?k=n:h||(h=!0),i=!1}else if(j)if(1===d[l])-1===k&&(k=n);else if(34===l&&-1!==k)j=!1,m=n;else if(92===l)i=!0;else throw SyntaxError(`Unexpected character at index ${n}`);else if(34===l&&61===a.charCodeAt(n-1))j=!0;else if(-1===m&&1===d[l])-1===k&&(k=n);else if(-1!==k&&(32===l||9===l))-1===m&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n);let d=a.slice(k,m);h&&(d=d.replace(/\\/g,""),h=!1),e(g,c,d),44===l&&(e(f,b,g),g=Object.create(null),b=void 0),c=void 0,k=m=-1}else throw SyntaxError(`Unexpected character at index ${n}`);if(-1===k||j||32===l||9===l)throw SyntaxError("Unexpected end of input");-1===m&&(m=n);let o=a.slice(k,m);return void 0===b?e(f,o,g):(void 0===c?e(g,o,!0):h?e(g,c,o.replace(/\\/g,"")):e(g,c,o),e(f,b,g)),f}}},41649,(a,b,c)=>{"use strict";let d=a.r(27699),e=a.r(24836),f=a.r(21517),g=a.r(4446),h=a.r(55004),{randomBytes:i,createHash:j}=a.r(54799),{Duplex:k,Readable:l}=a.r(88947),{URL:m}=a.r(92509),n=a.r(45143),o=a.r(71345),p=a.r(78583),{isBlob:q}=a.r(57147),{BINARY_TYPES:r,EMPTY_BUFFER:s,GUID:t,kForOnEventAttribute:u,kListener:v,kStatusCode:w,kWebSocket:x,NOOP:y}=a.r(25558),{EventTarget:{addEventListener:z,removeEventListener:A}}=a.r(21392),{format:B,parse:C}=a.r(43017),{toBuffer:D}=a.r(54242),E=Symbol("kAborted"),F=[8,13],G=["CONNECTING","OPEN","CLOSING","CLOSED"],H=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class I extends d{constructor(a,b,c){super(),this._binaryType=r[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=s,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=I.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==a?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===b?b=[]:Array.isArray(b)||("object"==typeof b&&null!==b?(c=b,b=[]):b=[b]),function a(b,c,d,g){let h,k,l,o,p={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:F[1],maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...g,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(b._autoPong=p.autoPong,!F.includes(p.protocolVersion))throw RangeError(`Unsupported protocol version: ${p.protocolVersion} (supported versions: ${F.join(", ")})`);if(c instanceof m)h=c;else try{h=new m(c)}catch(a){throw SyntaxError(`Invalid URL: ${c}`)}"http:"===h.protocol?h.protocol="ws:":"https:"===h.protocol&&(h.protocol="wss:"),b._url=h.href;let q="wss:"===h.protocol,r="ws+unix:"===h.protocol;if("ws:"===h.protocol||q||r?r&&!h.pathname?k="The URL's pathname is empty":h.hash&&(k="The URL contains a fragment identifier"):k='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https:", or "ws+unix:"',k){let a=SyntaxError(k);if(0!==b._redirects)return void J(b,a);throw a}let s=q?443:80,u=i(16).toString("base64"),v=q?e.request:f.request,w=new Set;if(p.createConnection=p.createConnection||(q?L:K),p.defaultPort=p.defaultPort||s,p.port=h.port||s,p.host=h.hostname.startsWith("[")?h.hostname.slice(1,-1):h.hostname,p.headers={...p.headers,"Sec-WebSocket-Version":p.protocolVersion,"Sec-WebSocket-Key":u,Connection:"Upgrade",Upgrade:"websocket"},p.path=h.pathname+h.search,p.timeout=p.handshakeTimeout,p.perMessageDeflate&&(l=new n(!0!==p.perMessageDeflate?p.perMessageDeflate:{},!1,p.maxPayload),p.headers["Sec-WebSocket-Extensions"]=B({[n.extensionName]:l.offer()})),d.length){for(let a of d){if("string"!=typeof a||!H.test(a)||w.has(a))throw SyntaxError("An invalid or duplicated subprotocol was specified");w.add(a)}p.headers["Sec-WebSocket-Protocol"]=d.join(",")}if(p.origin&&(p.protocolVersion<13?p.headers["Sec-WebSocket-Origin"]=p.origin:p.headers.Origin=p.origin),(h.username||h.password)&&(p.auth=`${h.username}:${h.password}`),r){let a=p.path.split(":");p.socketPath=a[0],p.path=a[1]}if(p.followRedirects){if(0===b._redirects){b._originalIpc=r,b._originalSecure=q,b._originalHostOrSocketPath=r?p.socketPath:h.host;let a=g&&g.headers;if(g={...g,headers:{}},a)for(let[b,c]of Object.entries(a))g.headers[b.toLowerCase()]=c}else if(0===b.listenerCount("redirect")){let a=r?!!b._originalIpc&&p.socketPath===b._originalHostOrSocketPath:!b._originalIpc&&h.host===b._originalHostOrSocketPath;a&&(!b._originalSecure||q)||(delete p.headers.authorization,delete p.headers.cookie,a||delete p.headers.host,p.auth=void 0)}p.auth&&!g.headers.authorization&&(g.headers.authorization="Basic "+Buffer.from(p.auth).toString("base64")),o=b._req=v(p),b._redirects&&b.emit("redirect",b.url,o)}else o=b._req=v(p);p.timeout&&o.on("timeout",()=>{M(b,o,"Opening handshake has timed out")}),o.on("error",a=>{null===o||o[E]||(o=b._req=null,J(b,a))}),o.on("response",e=>{let f=e.headers.location,h=e.statusCode;if(f&&p.followRedirects&&h>=300&&h<400){let e;if(++b._redirects>p.maxRedirects)return void M(b,o,"Maximum redirects exceeded");o.abort();try{e=new m(f,c)}catch(a){J(b,SyntaxError(`Invalid URL: ${f}`));return}a(b,e,d,g)}else b.emit("unexpected-response",o,e)||M(b,o,`Unexpected server response: ${e.statusCode}`)}),o.on("upgrade",(a,c,d)=>{let e;if(b.emit("upgrade",a),b.readyState!==I.CONNECTING)return;o=b._req=null;let f=a.headers.upgrade;if(void 0===f||"websocket"!==f.toLowerCase())return void M(b,c,"Invalid Upgrade header");let g=j("sha1").update(u+t).digest("base64");if(a.headers["sec-websocket-accept"]!==g)return void M(b,c,"Invalid Sec-WebSocket-Accept header");let h=a.headers["sec-websocket-protocol"];if(void 0!==h?w.size?w.has(h)||(e="Server sent an invalid subprotocol"):e="Server sent a subprotocol but none was requested":w.size&&(e="Server sent no subprotocol"),e)return void M(b,c,e);h&&(b._protocol=h);let i=a.headers["sec-websocket-extensions"];if(void 0!==i){let a;if(!l)return void M(b,c,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");try{a=C(i)}catch(a){M(b,c,"Invalid Sec-WebSocket-Extensions header");return}let d=Object.keys(a);if(1!==d.length||d[0]!==n.extensionName)return void M(b,c,"Server indicated an extension that was not requested");try{l.accept(a[n.extensionName])}catch(a){M(b,c,"Invalid Sec-WebSocket-Extensions header");return}b._extensions[n.extensionName]=l}b.setSocket(c,d,{allowSynchronousEvents:p.allowSynchronousEvents,generateMask:p.generateMask,maxPayload:p.maxPayload,skipUTF8Validation:p.skipUTF8Validation})}),p.finishRequest?p.finishRequest(o,b):o.end()}(this,a,b,c)):(this._autoPong=c.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(a){r.includes(a)&&(this._binaryType=a,this._receiver&&(this._receiver._binaryType=a))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(a,b,c){let d=new o({allowSynchronousEvents:c.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:c.maxPayload,skipUTF8Validation:c.skipUTF8Validation}),e=new p(a,this._extensions,c.generateMask);this._receiver=d,this._sender=e,this._socket=a,d[x]=this,e[x]=this,a[x]=this,d.on("conclude",O),d.on("drain",P),d.on("error",Q),d.on("message",S),d.on("ping",T),d.on("pong",U),e.onerror=W,a.setTimeout&&a.setTimeout(0),a.setNoDelay&&a.setNoDelay(),b.length>0&&a.unshift(b),a.on("close",Y),a.on("data",Z),a.on("end",$),a.on("error",_),this._readyState=I.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=I.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[n.extensionName]&&this._extensions[n.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=I.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(a,b){if(this.readyState!==I.CLOSED){if(this.readyState===I.CONNECTING)return void M(this,this._req,"WebSocket was closed before the connection was established");if(this.readyState===I.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=I.CLOSING,this._sender.close(a,b,!this._isServer,a=>{!a&&(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),X(this)}}pause(){this.readyState!==I.CONNECTING&&this.readyState!==I.CLOSED&&(this._paused=!0,this._socket.pause())}ping(a,b,c){if(this.readyState===I.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");("function"==typeof a?(c=a,a=b=void 0):"function"==typeof b&&(c=b,b=void 0),"number"==typeof a&&(a=a.toString()),this.readyState!==I.OPEN)?N(this,a,c):(void 0===b&&(b=!this._isServer),this._sender.ping(a||s,b,c))}pong(a,b,c){if(this.readyState===I.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");("function"==typeof a?(c=a,a=b=void 0):"function"==typeof b&&(c=b,b=void 0),"number"==typeof a&&(a=a.toString()),this.readyState!==I.OPEN)?N(this,a,c):(void 0===b&&(b=!this._isServer),this._sender.pong(a||s,b,c))}resume(){this.readyState!==I.CONNECTING&&this.readyState!==I.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(a,b,c){if(this.readyState===I.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof b&&(c=b,b={}),"number"==typeof a&&(a=a.toString()),this.readyState!==I.OPEN)return void N(this,a,c);let d={binary:"string"!=typeof a,mask:!this._isServer,compress:!0,fin:!0,...b};this._extensions[n.extensionName]||(d.compress=!1),this._sender.send(a||s,d,c)}terminate(){if(this.readyState!==I.CLOSED){if(this.readyState===I.CONNECTING)return void M(this,this._req,"WebSocket was closed before the connection was established");this._socket&&(this._readyState=I.CLOSING,this._socket.destroy())}}}function J(a,b){a._readyState=I.CLOSING,a._errorEmitted=!0,a.emit("error",b),a.emitClose()}function K(a){return a.path=a.socketPath,g.connect(a)}function L(a){return a.path=void 0,a.servername||""===a.servername||(a.servername=g.isIP(a.host)?"":a.host),h.connect(a)}function M(a,b,c){a._readyState=I.CLOSING;let d=Error(c);Error.captureStackTrace(d,M),b.setHeader?(b[E]=!0,b.abort(),b.socket&&!b.socket.destroyed&&b.socket.destroy(),process.nextTick(J,a,d)):(b.destroy(d),b.once("error",a.emit.bind(a,"error")),b.once("close",a.emitClose.bind(a)))}function N(a,b,c){if(b){let c=q(b)?b.size:D(b).length;a._socket?a._sender._bufferedBytes+=c:a._bufferedAmount+=c}if(c){let b=Error(`WebSocket is not open: readyState ${a.readyState} (${G[a.readyState]})`);process.nextTick(c,b)}}function O(a,b){let c=this[x];c._closeFrameReceived=!0,c._closeMessage=b,c._closeCode=a,void 0!==c._socket[x]&&(c._socket.removeListener("data",Z),process.nextTick(V,c._socket),1005===a?c.close():c.close(a,b))}function P(){let a=this[x];a.isPaused||a._socket.resume()}function Q(a){let b=this[x];void 0!==b._socket[x]&&(b._socket.removeListener("data",Z),process.nextTick(V,b._socket),b.close(a[w])),b._errorEmitted||(b._errorEmitted=!0,b.emit("error",a))}function R(){this[x].emitClose()}function S(a,b){this[x].emit("message",a,b)}function T(a){let b=this[x];b._autoPong&&b.pong(a,!this._isServer,y),b.emit("ping",a)}function U(a){this[x].emit("pong",a)}function V(a){a.resume()}function W(a){let b=this[x];b.readyState!==I.CLOSED&&(b.readyState===I.OPEN&&(b._readyState=I.CLOSING,X(b)),this._socket.end(),b._errorEmitted||(b._errorEmitted=!0,b.emit("error",a)))}function X(a){a._closeTimer=setTimeout(a._socket.destroy.bind(a._socket),3e4)}function Y(){let a,b=this[x];this.removeListener("close",Y),this.removeListener("data",Z),this.removeListener("end",$),b._readyState=I.CLOSING,this._readableState.endEmitted||b._closeFrameReceived||b._receiver._writableState.errorEmitted||null===(a=b._socket.read())||b._receiver.write(a),b._receiver.end(),this[x]=void 0,clearTimeout(b._closeTimer),b._receiver._writableState.finished||b._receiver._writableState.errorEmitted?b.emitClose():(b._receiver.on("error",R),b._receiver.on("finish",R))}function Z(a){this[x]._receiver.write(a)||this.pause()}function $(){let a=this[x];a._readyState=I.CLOSING,a._receiver.end(),this.end()}function _(){let a=this[x];this.removeListener("error",_),this.on("error",y),a&&(a._readyState=I.CLOSING,this.destroy())}Object.defineProperty(I,"CONNECTING",{enumerable:!0,value:G.indexOf("CONNECTING")}),Object.defineProperty(I.prototype,"CONNECTING",{enumerable:!0,value:G.indexOf("CONNECTING")}),Object.defineProperty(I,"OPEN",{enumerable:!0,value:G.indexOf("OPEN")}),Object.defineProperty(I.prototype,"OPEN",{enumerable:!0,value:G.indexOf("OPEN")}),Object.defineProperty(I,"CLOSING",{enumerable:!0,value:G.indexOf("CLOSING")}),Object.defineProperty(I.prototype,"CLOSING",{enumerable:!0,value:G.indexOf("CLOSING")}),Object.defineProperty(I,"CLOSED",{enumerable:!0,value:G.indexOf("CLOSED")}),Object.defineProperty(I.prototype,"CLOSED",{enumerable:!0,value:G.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(a=>{Object.defineProperty(I.prototype,a,{enumerable:!0})}),["open","error","close","message"].forEach(a=>{Object.defineProperty(I.prototype,`on${a}`,{enumerable:!0,get(){for(let b of this.listeners(a))if(b[u])return b[v];return null},set(b){for(let b of this.listeners(a))if(b[u]){this.removeListener(a,b);break}"function"==typeof b&&this.addEventListener(a,b,{[u]:!0})}})}),I.prototype.addEventListener=z,I.prototype.removeEventListener=A,b.exports=I},10578,(a,b,c)=>{"use strict";a.r(41649);let{Duplex:d}=a.r(88947);function e(a){a.emit("close")}function f(){!this.destroyed&&this._writableState.finished&&this.destroy()}function g(a){this.removeListener("error",g),this.destroy(),0===this.listenerCount("error")&&this.emit("error",a)}b.exports=function(a,b){let c=!0,h=new d({...b,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return a.on("message",function(b,c){let d=!c&&h._readableState.objectMode?b.toString():b;h.push(d)||a.pause()}),a.once("error",function(a){h.destroyed||(c=!1,h.destroy(a))}),a.once("close",function(){h.destroyed||h.push(null)}),h._destroy=function(b,d){if(a.readyState===a.CLOSED){d(b),process.nextTick(e,h);return}let f=!1;a.once("error",function(a){f=!0,d(a)}),a.once("close",function(){f||d(b),process.nextTick(e,h)}),c&&a.terminate()},h._final=function(b){a.readyState===a.CONNECTING?a.once("open",function(){h._final(b)}):null!==a._socket&&(a._socket._writableState.finished?(b(),h._readableState.endEmitted&&h.destroy()):(a._socket.once("finish",function(){b()}),a.close()))},h._read=function(){a.isPaused&&a.resume()},h._write=function(b,c,d){a.readyState===a.CONNECTING?a.once("open",function(){h._write(b,c,d)}):a.send(b,d)},h.on("end",f),h.on("error",g),h}},35134,(a,b,c)=>{"use strict";let{tokenChars:d}=a.r(57147);b.exports={parse:function(a){let b=new Set,c=-1,e=-1,f=0;for(;f<a.length;f++){let g=a.charCodeAt(f);if(-1===e&&1===d[g])-1===c&&(c=f);else if(0!==f&&(32===g||9===g))-1===e&&-1!==c&&(e=f);else if(44===g){if(-1===c)throw SyntaxError(`Unexpected character at index ${f}`);-1===e&&(e=f);let d=a.slice(c,e);if(b.has(d))throw SyntaxError(`The "${d}" subprotocol is duplicated`);b.add(d),c=e=-1}else throw SyntaxError(`Unexpected character at index ${f}`)}if(-1===c||-1!==e)throw SyntaxError("Unexpected end of input");let g=a.slice(c,f);if(b.has(g))throw SyntaxError(`The "${g}" subprotocol is duplicated`);return b.add(g),b}}},4294,(a,b,c)=>{"use strict";let d=a.r(27699),e=a.r(21517),{Duplex:f}=a.r(88947),{createHash:g}=a.r(54799),h=a.r(43017),i=a.r(45143),j=a.r(35134),k=a.r(41649),{GUID:l,kWebSocket:m}=a.r(25558),n=/^[+/0-9A-Za-z]{22}==$/;function o(a){a._state=2,a.emit("close")}function p(){this.destroy()}function q(a,b,c,d){c=c||e.STATUS_CODES[b],d={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(c),...d},a.once("finish",a.destroy),a.end(`HTTP/1.1 ${b} ${e.STATUS_CODES[b]}\r
`+Object.keys(d).map(a=>`${a}: ${d[a]}`).join("\r\n")+"\r\n\r\n"+c)}function r(a,b,c,d,e,f){if(a.listenerCount("wsClientError")){let d=Error(e);Error.captureStackTrace(d,r),a.emit("wsClientError",d,c,b)}else q(c,d,e,f)}b.exports=class extends d{constructor(a,b){if(super(),null==(a={allowSynchronousEvents:!0,autoPong:!0,maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:k,...a}).port&&!a.server&&!a.noServer||null!=a.port&&(a.server||a.noServer)||a.server&&a.noServer)throw TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=a.port?(this._server=e.createServer((a,b)=>{let c=e.STATUS_CODES[426];b.writeHead(426,{"Content-Length":c.length,"Content-Type":"text/plain"}),b.end(c)}),this._server.listen(a.port,a.host,a.backlog,b)):a.server&&(this._server=a.server),this._server){const a=this.emit.bind(this,"connection");this._removeListeners=function(a,b){for(let c of Object.keys(b))a.on(c,b[c]);return function(){for(let c of Object.keys(b))a.removeListener(c,b[c])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(b,c,d)=>{this.handleUpgrade(b,c,d,a)}})}!0===a.perMessageDeflate&&(a.perMessageDeflate={}),a.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=a,this._state=0}address(){if(this.options.noServer)throw Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(a){if(2===this._state){a&&this.once("close",()=>{a(Error("The server is not running"))}),process.nextTick(o,this);return}if(a&&this.once("close",a),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(o,this);else{let a=this._server;this._removeListeners(),this._removeListeners=this._server=null,a.close(()=>{o(this)})}}shouldHandle(a){if(this.options.path){let b=a.url.indexOf("?");if((-1!==b?a.url.slice(0,b):a.url)!==this.options.path)return!1}return!0}handleUpgrade(a,b,c,d){b.on("error",p);let e=a.headers["sec-websocket-key"],f=a.headers.upgrade,g=+a.headers["sec-websocket-version"];if("GET"!==a.method)return void r(this,a,b,405,"Invalid HTTP method");if(void 0===f||"websocket"!==f.toLowerCase())return void r(this,a,b,400,"Invalid Upgrade header");if(void 0===e||!n.test(e))return void r(this,a,b,400,"Missing or invalid Sec-WebSocket-Key header");if(13!==g&&8!==g)return void r(this,a,b,400,"Missing or invalid Sec-WebSocket-Version header",{"Sec-WebSocket-Version":"13, 8"});if(!this.shouldHandle(a))return void q(b,400);let k=a.headers["sec-websocket-protocol"],l=new Set;if(void 0!==k)try{l=j.parse(k)}catch(c){r(this,a,b,400,"Invalid Sec-WebSocket-Protocol header");return}let m=a.headers["sec-websocket-extensions"],o={};if(this.options.perMessageDeflate&&void 0!==m){let c=new i(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let a=h.parse(m);a[i.extensionName]&&(c.accept(a[i.extensionName]),o[i.extensionName]=c)}catch(c){r(this,a,b,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let f={origin:a.headers[`${8===g?"sec-websocket-origin":"origin"}`],secure:!!(a.socket.authorized||a.socket.encrypted),req:a};if(2===this.options.verifyClient.length)return void this.options.verifyClient(f,(f,g,h,i)=>{if(!f)return q(b,g||401,h,i);this.completeUpgrade(o,e,l,a,b,c,d)});if(!this.options.verifyClient(f))return q(b,401)}this.completeUpgrade(o,e,l,a,b,c,d)}completeUpgrade(a,b,c,d,e,f,j){if(!e.readable||!e.writable)return e.destroy();if(e[m])throw Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return q(e,503);let k=g("sha1").update(b+l).digest("base64"),n=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${k}`],r=new this.options.WebSocket(null,void 0,this.options);if(c.size){let a=this.options.handleProtocols?this.options.handleProtocols(c,d):c.values().next().value;a&&(n.push(`Sec-WebSocket-Protocol: ${a}`),r._protocol=a)}if(a[i.extensionName]){let b=a[i.extensionName].params,c=h.format({[i.extensionName]:[b]});n.push(`Sec-WebSocket-Extensions: ${c}`),r._extensions=a}this.emit("headers",n,d),e.write(n.concat("\r\n").join("\r\n")),e.removeListener("error",p),r.setSocket(e,f,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(r),r.on("close",()=>{this.clients.delete(r),this._shouldEmitClose&&!this.clients.size&&process.nextTick(o,this)})),j(r,d)}}},43373,a=>{"use strict";a.s([],17595),a.i(17595),a.i(10578),a.i(71345),a.i(78583);var b,c,d,e,f,g=a.i(41649);a.i(4294),g.default;let h="undefined"!=typeof globalThis&&(null==(b=null==globalThis?void 0:globalThis.navigator)?void 0:b.userAgent)==="Cloudflare-Workers"?{type:"workerd"}:"string"==typeof EdgeRuntime?{type:"edge-runtime"}:"object"==typeof self&&"function"==typeof(null==self?void 0:self.importScripts)&&((null==(c=self.constructor)?void 0:c.name)==="DedicatedWorkerGlobalScope"||(null==(d=self.constructor)?void 0:d.name)==="ServiceWorkerGlobalScope"||(null==(e=self.constructor)?void 0:e.name)==="SharedWorkerGlobalScope")?{type:"web-worker"}:"undefined"!=typeof Deno&&void 0!==Deno.version&&void 0!==Deno.version.deno?{type:"deno",version:Deno.version.deno}:"undefined"!=typeof Bun&&void 0!==Bun.version?{type:"bun",version:Bun.version}:"undefined"!=typeof process&&"version"in process&&process.version&&"versions"in process&&(null==(f=process.versions)?void 0:f.node)?{type:"node",version:process.versions.node,parsedVersion:Number(process.versions.node.split(".")[0])}:"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.product)==="ReactNative"?{type:"react-native"}:{type:"unknown"},i={arrayFormat:"indices",encode:!0};function j(a,b){if(null==a)return"";let c=String(a);return b?encodeURIComponent(c):c}function k(a,b){return null==a||"object"!=typeof a?"":(function a(b,c="",d){let e=[];for(let[f,g]of Object.entries(b)){let b=c?`${c}[${f}]`:f;if(void 0!==g)if(Array.isArray(g)){if(0===g.length)continue;for(let c=0;c<g.length;c++){let f=g[c];if(void 0!==f)if("object"!=typeof f||Array.isArray(f)||null===f){let a="indices"===d.arrayFormat?`${b}[${c}]`:b,g=d.encode?encodeURIComponent(a):a;e.push(`${g}=${j(f,d.encode)}`)}else{let g="indices"===d.arrayFormat?`${b}[${c}]`:b;e.push(...a(f,g,d))}}}else if("object"==typeof g&&null!==g){if(0===Object.keys(g).length)continue;e.push(...a(g,b,d))}else{let a=d.encode?encodeURIComponent(b):b;e.push(`${a}=${j(g,d.encode)}`)}}return e})(a,"",Object.assign(Object.assign({},i),b)).join("&")}class l{constructor(a,b){this.target=b,this.type=a}}class m extends l{constructor(a,b){super("error",b),this.message=a.message,this.error=a}}class n extends l{constructor(a=1e3,b="",c){super("close",c),this.wasClean=!0,this.code=a,this.reason=b}}let o={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+4e3*Math.random(),minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1};class p{constructor({url:a,protocols:b,options:c,headers:d,queryParameters:e}){this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=a=>{this._debug("open event");let{minUptime:b=o.minUptime}=this._options;clearTimeout(this._connectTimeout),this._uptimeTimeout=setTimeout(()=>this._acceptOpen(),b),this._ws.binaryType=this._binaryType,this._messageQueue.forEach(a=>{var b;return null==(b=this._ws)?void 0:b.send(a)}),this._messageQueue=[],this.onopen&&this.onopen(a),this._listeners.open.forEach(b=>this._callEventListener(a,b))},this._handleMessage=a=>{this._debug("message event"),this.onmessage&&this.onmessage(a),this._listeners.message.forEach(b=>this._callEventListener(a,b))},this._handleError=a=>{this._debug("error event",a.message),this._disconnect(void 0,"TIMEOUT"===a.message?"timeout":void 0),this.onerror&&this.onerror(a),this._debug("exec error listeners"),this._listeners.error.forEach(b=>this._callEventListener(a,b)),this._connect()},this._handleClose=a=>{this._debug("close event"),this._clearTimeouts(),1e3===a.code&&(this._shouldReconnect=!1),this._shouldReconnect&&this._connect(),this.onclose&&this.onclose(a),this._listeners.close.forEach(b=>this._callEventListener(a,b))},this._url=a,this._protocols=b,this._options=null!=c?c:o,this._headers=d,this._queryParameters=Object.assign(Object.assign({},function({headers:a,queryParameters:b}){let c=(null==a?void 0:a.Authorization)||(null==a?void 0:a.authorization);if(!c||!c.startsWith("Bearer ")||(null==b?void 0:b.access_token))return b;let d=c.substring(7);return Object.assign(Object.assign({},b),{access_token:d})}({headers:d,queryParameters:function({headers:a,queryParameters:b}){var c;let d=null==(c=Object.entries(null!=a?a:{}).find(([a])=>"x-hume-api-key"===a.toLowerCase()))?void 0:c[1];return!d||(null==b?void 0:b.api_key)?b:Object.assign(Object.assign({},b),{api_key:d})}({headers:d,queryParameters:e})})),{fernSdkLanguage:"JavaScript",fernSdkVersion:"0.15.9"}),this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}static get CONNECTING(){return 0}static get OPEN(){return 1}static get CLOSING(){return 2}static get CLOSED(){return 3}get CONNECTING(){return p.CONNECTING}get OPEN(){return p.OPEN}get CLOSING(){return p.CLOSING}get CLOSED(){return p.CLOSED}get binaryType(){return this._ws?this._ws.binaryType:this._binaryType}set binaryType(a){this._binaryType=a,this._ws&&(this._ws.binaryType=a)}get retryCount(){return Math.max(this._retryCount,0)}get bufferedAmount(){return this._messageQueue.reduce((a,b)=>("string"==typeof b?a+=b.length:b instanceof Blob?a+=b.size:a+=b.byteLength,a),0)+(this._ws?this._ws.bufferedAmount:0)}get extensions(){return this._ws?this._ws.extensions:""}get protocol(){return this._ws?this._ws.protocol:""}get readyState(){return this._ws?this._ws.readyState:this._options.startClosed?p.CLOSED:p.CONNECTING}get url(){return this._ws?this._ws.url:""}close(a=1e3,b){(this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),this._ws)?this._ws.readyState===this.CLOSED?this._debug("close: already closed"):this._ws.close(a,b):this._debug("close enqueued: no ws instance")}reconnect(a,b){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,this._ws&&this._ws.readyState!==this.CLOSED&&this._disconnect(a,b),this._connect()}send(a){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",a),this._ws.send(a);else{let{maxEnqueuedMessages:b=o.maxEnqueuedMessages}=this._options;this._messageQueue.length<b&&(this._debug("enqueue",a),this._messageQueue.push(a))}}addEventListener(a,b){this._listeners[a]&&this._listeners[a].push(b)}dispatchEvent(a){let b=this._listeners[a.type];if(b)for(let c of b)this._callEventListener(a,c);return!0}removeEventListener(a,b){this._listeners[a]&&(this._listeners[a]=this._listeners[a].filter(a=>a!==b))}_debug(...a){this._options.debug&&console.log.apply(console,["RWS>",...a])}_getNextDelay(){let{reconnectionDelayGrowFactor:a=o.reconnectionDelayGrowFactor,minReconnectionDelay:b=o.minReconnectionDelay,maxReconnectionDelay:c=o.maxReconnectionDelay}=this._options,d=0;return this._retryCount>0&&(d=b*Math.pow(a,this._retryCount-1))>c&&(d=c),this._debug("next delay",d),d}_wait(){return new Promise(a=>{setTimeout(a,this._getNextDelay())})}_getNextUrl(a){if("string"==typeof a)return Promise.resolve(a);if("function"==typeof a){let b=a();if("string"==typeof b)return Promise.resolve(b);if(b.then)return b}throw Error("Invalid URL")}_connect(){if(this._connectLock||!this._shouldReconnect)return;this._connectLock=!0;let{maxRetries:a=o.maxRetries,connectionTimeout:b=o.connectionTimeout,WebSocket:c="undefined"!=typeof WebSocket?WebSocket:"node"===h.type?g.default:void 0}=this._options;if(this._retryCount>=a)return void this._debug("max retries reached",this._retryCount,">=",a);if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!(void 0!==c&&c&&2===c.CLOSING))throw Error("No valid WebSocket class provided");this._wait().then(()=>this._getNextUrl(this._url)).then(a=>{if(this._closeCalled)return;let d={};if(this._headers&&(d.headers=this._headers),this._queryParameters&&Object.keys(this._queryParameters).length>0){let b=k(this._queryParameters,{arrayFormat:"repeat"});b&&(a=`${a}?${b}`)}this._ws=new c(a,this._protocols,d),this._ws.binaryType=this._binaryType,this._connectLock=!1,this._addListeners(),this._connectTimeout=setTimeout(()=>this._handleTimeout(),b)})}_handleTimeout(){this._debug("timeout event"),this._handleError(new m(Error("TIMEOUT"),this))}_disconnect(a=1e3,b){if(this._clearTimeouts(),this._ws){this._removeListeners();try{this._ws.close(a,b),this._handleClose(new n(a,b,this))}catch(a){}}}_acceptOpen(){this._debug("accept open"),this._retryCount=0}_callEventListener(a,b){"handleEvent"in b?b.handleEvent(a):b(a)}_removeListeners(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))}_addListeners(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))}_clearTimeouts(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)}}a.s([],19749),a.i(19749),a.s([],39639),a.i(39639),a.s([],85193),a.i(85193);let q="object",r="number",s="unknown",t="optional",u="optionalNullable";function v(a,b){return`Expected ${b}. Received ${function(a){if(Array.isArray(a))return"list";if(null===a)return"null";if(a instanceof BigInt)return"BigInt";switch(typeof a){case"string":return`"${a}"`;case"bigint":case"number":case"boolean":case"undefined":return`${a}`}return typeof a}(a)}.`}function w(a){return Object.assign(Object.assign({},a),{json:x(a.json),parse:x(a.parse)})}function x(a){return(b,c)=>{let d=a(b,c),{skipValidation:e=!1}=null!=c?c:{};return!d.ok&&e?(console.warn(["Failed to validate.",...d.errors.map(a=>"  - "+(a.path.length>0?`${a.path.join(".")}: ${a.message}`:a.message))].join("\n")),{ok:!0,value:b}):d}}function y(a){return 0===a.path.length?a.message:`${a.path.join(" -> ")}: ${a.message}`}class z extends Error{constructor(a){super(a.map(y).join("; ")),this.errors=a,Object.setPrototypeOf(this,z.prototype)}}class A extends Error{constructor(a){super(a.map(y).join("; ")),this.errors=a,Object.setPrototypeOf(this,A.prototype)}}function B(a){return{nullable:()=>{var b;let c;return b=a,Object.assign(Object.assign({},c={parse:(a,c)=>null==a?{ok:!0,value:null}:b.parse(a,c),json:(a,c)=>null==a?{ok:!0,value:null}:b.json(a,c),getType:()=>"nullable"}),B(c))},optional:()=>C(a),optionalNullable:()=>{var b;let c;return b=a,Object.assign(Object.assign({},c={parse:(a,c)=>void 0===a?{ok:!0,value:void 0}:null===a?{ok:!0,value:null}:b.parse(a,c),json:(a,c)=>void 0===a?{ok:!0,value:void 0}:null===a?{ok:!0,value:null}:b.json(a,c),getType:()=>u}),B(c))},transform:b=>D(a,b),parseOrThrow:(b,c)=>{let d=a.parse(b,c);if(d.ok)return d.value;throw new A(d.errors)},jsonOrThrow:(b,c)=>{let d=a.json(b,c);if(d.ok)return d.value;throw new z(d.errors)}}}function C(a){let b={parse:(b,c)=>null==b?{ok:!0,value:void 0}:a.parse(b,c),json:(b,c)=>(null==c?void 0:c.omitUndefined)&&void 0===b?{ok:!0,value:void 0}:null==b?{ok:!0,value:null}:a.json(b,c),getType:()=>t};return Object.assign(Object.assign({},b),B(b))}function D(a,b){let c={parse:(c,d)=>{let e=a.parse(c,d);return e.ok?{ok:!0,value:b.transform(e.value)}:e},json:(c,d)=>{let e=b.untransform(c);return a.json(e,d)},getType:()=>a.getType()};return Object.assign(Object.assign({},c),B(c))}function E(){let a={parse:(a,{breadcrumbsPrefix:b=[]}={})=>"bigint"==typeof a?{ok:!0,value:a}:"number"==typeof a?{ok:!0,value:BigInt(a)}:{ok:!1,errors:[{path:b,message:v(a,"bigint | number")}]},json:(a,{breadcrumbsPrefix:b=[]}={})=>"bigint"!=typeof a?{ok:!1,errors:[{path:b,message:v(a,"bigint")}]}:{ok:!0,value:a},getType:()=>"bigint"};return Object.assign(Object.assign({},w(a)),B(a))}a.s(["bigint",()=>E],83988),a.i(83988),a.s([],14325),a.i(14325);let F=/^([+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([.,]\d+(?!:))?)?(\17[0-5]\d([.,]\d+)?)?([zZ]|([+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/;function G(){let a={parse:(a,{breadcrumbsPrefix:b=[]}={})=>"string"!=typeof a?{ok:!1,errors:[{path:b,message:v(a,"string")}]}:F.test(a)?{ok:!0,value:new Date(a)}:{ok:!1,errors:[{path:b,message:v(a,"ISO 8601 date string")}]},json:(a,{breadcrumbsPrefix:b=[]}={})=>a instanceof Date?{ok:!0,value:a.toISOString()}:{ok:!1,errors:[{path:b,message:v(a,"Date object")}]},getType:()=>"date"};return Object.assign(Object.assign({},w(a)),B(a))}function H(a,b){return()=>{let c={parse:b,json:b,getType:()=>a};return Object.assign(Object.assign({},w(c)),B(c))}}function I(a){let b=new Set(a);return H("enum",(a,{allowUnrecognizedEnumValues:c,breadcrumbsPrefix:d=[]}={})=>"string"!=typeof a?{ok:!1,errors:[{path:d,message:v(a,"string")}]}:b.has(a)||c?{ok:!0,value:a}:{ok:!1,errors:[{path:d,message:v(a,"enum")}]})()}function J(a){let b=K(a);return Object.assign(Object.assign({},b),B(b))}function K(a){return{parse:(b,c)=>L(a).parse(b,c),json:(b,c)=>L(a).json(b,c),getType:()=>L(a).getType()}}function L(a){return null==a.__zurg_memoized&&(a.__zurg_memoized=a()),a.__zurg_memoized}function M(a){return Object.entries(a)}function N(a,b){let c=new Set(b);return Object.entries(a).reduce((a,[b,d])=>(c.has(b)&&(a[b]=d),a),{})}function O(a){if("object"!=typeof a||null===a)return!1;if(null===Object.getPrototypeOf(a))return!0;let b=a;for(;null!==Object.getPrototypeOf(b);)b=Object.getPrototypeOf(b);return Object.getPrototypeOf(a)===b}function P(a){return Object.keys(a)}function Q(a){return{withParsedProperties:b=>R(a,b)}}function R(a,b){let c={parse:(c,d)=>{let e=a.parse(c,d);if(!e.ok)return e;let f=Object.entries(b).reduce((a,[b,c])=>Object.assign(Object.assign({},a),{[b]:"function"==typeof c?c(e.value):c}),{});return{ok:!0,value:Object.assign(Object.assign({},e.value),f)}},json:(c,d)=>{var e;if(!O(c))return{ok:!1,errors:[{path:null!=(e=null==d?void 0:d.breadcrumbsPrefix)?e:[],message:v(c,"object")}]};let f=new Set(Object.keys(b)),g=N(c,Object.keys(c).filter(a=>!f.has(a)));return a.json(g,d)},getType:()=>a.getType()};return Object.assign(Object.assign(Object.assign({},c),B(c)),Q(c))}function S(a,b){return{rawKey:a,valueSchema:b,isProperty:!0}}function T(a){return a.isProperty}function U(a){let b={_getRawProperties:()=>Object.entries(a).map(([a,b])=>T(b)?b.rawKey:a),_getParsedProperties:()=>P(a),parse:(b,c)=>{let d={},e=[];for(let[b,c]of M(a)){let a=T(c)?c.rawKey:b,f=T(c)?c.valueSchema:c,g={rawKey:a,parsedKey:b,valueSchema:f};d[a]=g,Y(f)||e.push(a)}return V({value:b,requiredKeys:e,getProperty:a=>{let b=d[a];if(null!=b)return{transformedKey:b.parsedKey,transform:d=>{var e;return b.valueSchema.parse(d,Object.assign(Object.assign({},c),{breadcrumbsPrefix:[...null!=(e=null==c?void 0:c.breadcrumbsPrefix)?e:[],a]}))}}},unrecognizedObjectKeys:null==c?void 0:c.unrecognizedObjectKeys,skipValidation:null==c?void 0:c.skipValidation,breadcrumbsPrefix:null==c?void 0:c.breadcrumbsPrefix,omitUndefined:null==c?void 0:c.omitUndefined})},json:(b,c)=>{let d=[];for(let[b,c]of M(a))Y(T(c)?c.valueSchema:c)||d.push(b);return V({value:b,requiredKeys:d,getProperty:b=>{let d=a[b];if(null!=d)if(T(d))return{transformedKey:d.rawKey,transform:a=>{var e;return d.valueSchema.json(a,Object.assign(Object.assign({},c),{breadcrumbsPrefix:[...null!=(e=null==c?void 0:c.breadcrumbsPrefix)?e:[],b]}))}};else return{transformedKey:b,transform:a=>{var e;return d.json(a,Object.assign(Object.assign({},c),{breadcrumbsPrefix:[...null!=(e=null==c?void 0:c.breadcrumbsPrefix)?e:[],b]}))}}},unrecognizedObjectKeys:null==c?void 0:c.unrecognizedObjectKeys,skipValidation:null==c?void 0:c.skipValidation,breadcrumbsPrefix:null==c?void 0:c.breadcrumbsPrefix,omitUndefined:null==c?void 0:c.omitUndefined})},getType:()=>q};return Object.assign(Object.assign(Object.assign(Object.assign({},w(b)),B(b)),Q(b)),W(b))}function V({value:a,requiredKeys:b,getProperty:c,unrecognizedObjectKeys:d="fail",skipValidation:e=!1,breadcrumbsPrefix:f=[]}){if(!O(a))return{ok:!1,errors:[{path:f,message:v(a,"object")}]};let g=new Set(b),h=[],i={};for(let[b,e]of Object.entries(a)){let a=c(b);if(null!=a){g.delete(b);let c=a.transform(e);c.ok?i[a.transformedKey]=c.value:(i[b]=e,h.push(...c.errors))}else switch(d){case"fail":h.push({path:[...f,b],message:`Unexpected key "${b}"`});break;case"strip":break;case"passthrough":i[b]=e}}return(h.push(...b.filter(a=>g.has(a)).map(a=>({path:f,message:`Missing required key "${a}"`}))),0===h.length||e)?{ok:!0,value:i}:{ok:!1,errors:h}}function W(a){return{extend:b=>{let c={_getParsedProperties:()=>[...a._getParsedProperties(),...b._getParsedProperties()],_getRawProperties:()=>[...a._getRawProperties(),...b._getRawProperties()],parse:(c,d)=>X({extensionKeys:b._getRawProperties(),value:c,transformBase:b=>a.parse(b,d),transformExtension:a=>b.parse(a,d)}),json:(c,d)=>X({extensionKeys:b._getParsedProperties(),value:c,transformBase:b=>a.json(b,d),transformExtension:a=>b.json(a,d)}),getType:()=>q};return Object.assign(Object.assign(Object.assign(Object.assign({},c),B(c)),Q(c)),W(c))},passthrough:()=>{let b={_getParsedProperties:()=>a._getParsedProperties(),_getRawProperties:()=>a._getRawProperties(),parse:(b,c)=>{let d=a.parse(b,Object.assign(Object.assign({},c),{unrecognizedObjectKeys:"passthrough"}));return d.ok?{ok:!0,value:Object.assign(Object.assign({},b),d.value)}:d},json:(b,c)=>{let d=a.json(b,Object.assign(Object.assign({},c),{unrecognizedObjectKeys:"passthrough"}));return d.ok?{ok:!0,value:Object.assign(Object.assign({},b),d.value)}:d},getType:()=>q};return Object.assign(Object.assign(Object.assign(Object.assign({},b),B(b)),Q(b)),W(b))}}}function X({extensionKeys:a,value:b,transformBase:c,transformExtension:d}){let e=new Set(a),[f,g]=function(a,b){let c=[],d=[];for(let e of a)b(e)?c.push(e):d.push(e);return[c,d]}(P(b),a=>e.has(a)),h=c(N(b,g)),i=d(N(b,f));return h.ok&&i.ok?{ok:!0,value:Object.assign(Object.assign({},h.value),i.value)}:{ok:!1,errors:[...h.ok?[]:h.errors,...i.ok?[]:i.errors]}}a.s(["date",()=>G],46461),a.i(46461),a.s([],18633),a.i(18633),a.s(["enum_",()=>I],55008),a.i(55008),a.s([],57768),a.i(57768);function Y(a){switch(a.getType()){case"any":case s:case t:case u:return!0;default:return!1}}function Z(a){let b=Object.assign(Object.assign({},K(a)),{_getRawProperties:()=>L(a)._getRawProperties(),_getParsedProperties:()=>L(a)._getParsedProperties()});return Object.assign(Object.assign(Object.assign(Object.assign({},b),B(b)),Q(b)),W(b))}function $(a){let b={parse:(b,c)=>_(b,(b,d)=>{var e;return a.parse(b,Object.assign(Object.assign({},c),{breadcrumbsPrefix:[...null!=(e=null==c?void 0:c.breadcrumbsPrefix)?e:[],`[${d}]`]}))}),json:(b,c)=>_(b,(b,d)=>{var e;return a.json(b,Object.assign(Object.assign({},c),{breadcrumbsPrefix:[...null!=(e=null==c?void 0:c.breadcrumbsPrefix)?e:[],`[${d}]`]}))}),getType:()=>"list"};return Object.assign(Object.assign({},w(b)),B(b))}function _(a,b){return Array.isArray(a)?a.map((a,c)=>b(a,c)).reduce((a,b)=>{if(a.ok&&b.ok)return{ok:!0,value:[...a.value,b.value]};let c=[];return a.ok||c.push(...a.errors),b.ok||c.push(...b.errors),{ok:!1,errors:c}},{ok:!0,value:[]}):{ok:!1,errors:[{message:v(a,"list"),path:[]}]}}function aa(a){return H("booleanLiteral",(b,{breadcrumbsPrefix:c=[]}={})=>b===a?{ok:!0,value:a}:{ok:!1,errors:[{path:c,message:v(b,`${a.toString()}`)}]})()}function ab(a){return H("stringLiteral",(b,{breadcrumbsPrefix:c=[]}={})=>b===a?{ok:!0,value:a}:{ok:!1,errors:[{path:c,message:v(b,`"${a}"`)}]})()}function ac(a){return U(a)}a.s(["lazy",()=>J,"lazyObject",()=>Z],45624),a.i(45624),a.s([],52454),a.i(52454),a.s(["list",()=>$],86809),a.i(86809),a.s([],60152),a.i(60152),a.s(["booleanLiteral",()=>aa,"stringLiteral",()=>ab],21580),a.i(21580),a.s([],72972),a.i(72972),a.s(["getObjectUtils",()=>W,"isProperty",()=>T,"object",()=>U,"objectWithoutOptionalProperties",()=>ac,"property",()=>S],74066),a.i(74066),a.s([],89186),a.i(89186),a.s(["getObjectLikeUtils",()=>Q,"withParsedProperties",()=>R],23172),a.i(23172),a.s([],41732),a.i(41732);let ad=H("any",a=>({ok:!0,value:a})),ae=H("boolean",(a,{breadcrumbsPrefix:b=[]}={})=>"boolean"==typeof a?{ok:!0,value:a}:{ok:!1,errors:[{path:b,message:v(a,"boolean")}]}),af=H(r,(a,{breadcrumbsPrefix:b=[]}={})=>"number"==typeof a?{ok:!0,value:a}:{ok:!1,errors:[{path:b,message:v(a,"number")}]}),ag=H("string",(a,{breadcrumbsPrefix:b=[]}={})=>"string"==typeof a?{ok:!0,value:a}:{ok:!1,errors:[{path:b,message:v(a,"string")}]}),ah=H(s,a=>({ok:!0,value:a}));function ai(a,b){let c={parse:(c,d)=>aj({value:c,isKeyNumeric:a.getType()===r,transformKey:b=>{var c;return a.parse(b,Object.assign(Object.assign({},d),{breadcrumbsPrefix:[...null!=(c=null==d?void 0:d.breadcrumbsPrefix)?c:[],`${b} (key)`]}))},transformValue:(a,c)=>{var e;return b.parse(a,Object.assign(Object.assign({},d),{breadcrumbsPrefix:[...null!=(e=null==d?void 0:d.breadcrumbsPrefix)?e:[],`${c}`]}))},breadcrumbsPrefix:null==d?void 0:d.breadcrumbsPrefix}),json:(c,d)=>aj({value:c,isKeyNumeric:a.getType()===r,transformKey:b=>{var c;return a.json(b,Object.assign(Object.assign({},d),{breadcrumbsPrefix:[...null!=(c=null==d?void 0:d.breadcrumbsPrefix)?c:[],`${b} (key)`]}))},transformValue:(a,c)=>{var e;return b.json(a,Object.assign(Object.assign({},d),{breadcrumbsPrefix:[...null!=(e=null==d?void 0:d.breadcrumbsPrefix)?e:[],`${c}`]}))},breadcrumbsPrefix:null==d?void 0:d.breadcrumbsPrefix}),getType:()=>"record"};return Object.assign(Object.assign({},w(c)),B(c))}function aj({value:a,isKeyNumeric:b,transformKey:c,transformValue:d,breadcrumbsPrefix:e=[]}){return O(a)?M(a).reduce((a,[e,f])=>{if(void 0===f)return a;let g=e;if(b){let a=e.length>0?Number(e):NaN;Number.isNaN(a)||(g=a)}let h=c(g),i=d(f,g);if(a.ok&&h.ok&&i.ok)return{ok:!0,value:Object.assign(Object.assign({},a.value),{[h.value]:i.value})};let j=[];return a.ok||j.push(...a.errors),h.ok||j.push(...h.errors),i.ok||j.push(...i.errors),{ok:!1,errors:j}},{ok:!0,value:{}}):{ok:!1,errors:[{path:e,message:v(a,"object")}]}}function ak(a){let b=$(a),c={parse:(a,c)=>{let d=b.parse(a,c);return d.ok?{ok:!0,value:new Set(d.value)}:d},json:(a,c)=>{var d;return a instanceof Set?b.json([...a],c):{ok:!1,errors:[{path:null!=(d=null==c?void 0:c.breadcrumbsPrefix)?d:[],message:v(a,"Set")}]}},getType:()=>"set"};return Object.assign(Object.assign({},w(c)),B(c))}function al(a){let b={parse:(b,c)=>am((a,c)=>a.parse(b,c),a,c),json:(b,c)=>am((a,c)=>a.json(b,c),a,c),getType:()=>"undiscriminatedUnion"};return Object.assign(Object.assign({},w(b)),B(b))}function am(a,b,c){let d=[];for(let[e,f]of b.entries()){let b=a(f,Object.assign(Object.assign({},c),{skipValidation:!1}));if(b.ok)return b;for(let a of b.errors)d.push({path:a.path,message:`[Variant ${e}] ${a.message}`})}return{ok:!1,errors:d}}function an(a,b){return{parsedDiscriminant:a,rawDiscriminant:b}}a.s(["any",0,ad,"boolean",0,ae,"number",0,af,"string",0,ag,"unknown",0,ah],7238),a.i(7238),a.s([],19492),a.i(19492),a.s(["record",()=>ai],26610),a.i(26610),a.s([],3494),a.i(3494),a.s(["JsonError",()=>z,"ParseError",()=>A,"getSchemaUtils",()=>B,"optional",()=>C,"transform",()=>D],6548),a.i(6548),a.s([],67205),a.i(67205),a.s(["set",()=>ak],12391),a.i(12391),a.s([],87002),a.i(87002),a.s(["undiscriminatedUnion",()=>al],28041),a.i(28041),a.s([],78873),a.i(78873);var ao=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c};function ap(a,b){let c="string"==typeof a?a:a.rawDiscriminant,d="string"==typeof a?a:a.parsedDiscriminant,e=I(P(b)),f={parse:(a,f)=>aq({value:a,discriminant:c,transformedDiscriminant:d,transformDiscriminantValue:a=>{var b;return e.parse(a,{allowUnrecognizedEnumValues:null==f?void 0:f.allowUnrecognizedUnionMembers,breadcrumbsPrefix:[...null!=(b=null==f?void 0:f.breadcrumbsPrefix)?b:[],c]})},getAdditionalPropertiesSchema:a=>b[a],allowUnrecognizedUnionMembers:null==f?void 0:f.allowUnrecognizedUnionMembers,transformAdditionalProperties:(a,b)=>b.parse(a,f),breadcrumbsPrefix:null==f?void 0:f.breadcrumbsPrefix}),json:(a,f)=>aq({value:a,discriminant:d,transformedDiscriminant:c,transformDiscriminantValue:a=>{var b;return e.json(a,{allowUnrecognizedEnumValues:null==f?void 0:f.allowUnrecognizedUnionMembers,breadcrumbsPrefix:[...null!=(b=null==f?void 0:f.breadcrumbsPrefix)?b:[],d]})},getAdditionalPropertiesSchema:a=>b[a],allowUnrecognizedUnionMembers:null==f?void 0:f.allowUnrecognizedUnionMembers,transformAdditionalProperties:(a,b)=>b.json(a,f),breadcrumbsPrefix:null==f?void 0:f.breadcrumbsPrefix}),getType:()=>"union"};return Object.assign(Object.assign(Object.assign({},w(f)),B(f)),Q(f))}function aq({value:a,discriminant:b,transformedDiscriminant:c,transformDiscriminantValue:d,getAdditionalPropertiesSchema:e,allowUnrecognizedUnionMembers:f=!1,transformAdditionalProperties:g,breadcrumbsPrefix:h=[]}){if(!O(a))return{ok:!1,errors:[{path:h,message:v(a,"object")}]};let i=a[b],j=ao(a,["symbol"==typeof b?b:b+""]);if(null==i)return{ok:!1,errors:[{path:h,message:`Missing discriminant ("${b}")`}]};let k=d(i);if(!k.ok)return{ok:!1,errors:k.errors};let l=e(k.value);if(null==l)if(f)return{ok:!0,value:Object.assign({[c]:k.value},j)};else return{ok:!1,errors:[{path:[...h,b],message:"Unexpected discriminant value"}]};let m=g(j,l);return m.ok?{ok:!0,value:Object.assign({[c]:i},m.value)}:m}a.s(["discriminant",()=>an,"union",()=>ap],67705),a.i(67705),a.s(["JsonError",()=>z,"ParseError",()=>A,"any",0,ad,"bigint",()=>E,"boolean",0,ae,"booleanLiteral",()=>aa,"date",()=>G,"discriminant",()=>an,"enum_",()=>I,"getObjectLikeUtils",()=>Q,"getObjectUtils",()=>W,"getSchemaUtils",()=>B,"isProperty",()=>T,"lazy",()=>J,"lazyObject",()=>Z,"list",()=>$,"number",0,af,"object",()=>U,"objectWithoutOptionalProperties",()=>ac,"optional",()=>C,"property",()=>S,"record",()=>ai,"set",()=>ak,"string",0,ag,"stringLiteral",()=>ab,"transform",()=>D,"undiscriminatedUnion",()=>al,"union",()=>ap,"unknown",0,ah,"withParsedProperties",()=>R],51231),a.i(51231),a.s(["JsonError",()=>z,"ParseError",()=>A,"any",0,ad,"bigint",()=>E,"boolean",0,ae,"booleanLiteral",()=>aa,"date",()=>G,"discriminant",()=>an,"enum_",()=>I,"getObjectLikeUtils",()=>Q,"getObjectUtils",()=>W,"getSchemaUtils",()=>B,"isProperty",()=>T,"lazy",()=>J,"lazyObject",()=>Z,"list",()=>$,"number",0,af,"object",()=>U,"objectWithoutOptionalProperties",()=>ac,"optional",()=>C,"property",()=>S,"record",()=>ai,"set",()=>ak,"string",0,ag,"stringLiteral",()=>ab,"transform",()=>D,"undiscriminatedUnion",()=>al,"union",()=>ap,"unknown",0,ah,"withParsedProperties",()=>R],94189);var ar=a.i(94189),ar=ar,ar=ar;let as=ar.object({customSessionId:ar.property("custom_session_id",ar.string().optional()),text:ar.string(),type:ar.stringLiteral("assistant_input")});a.s(["AssistantInput",0,as],35704);var ar=ar;let at=ar.object({customSessionId:ar.property("custom_session_id",ar.string().optional()),data:ar.string(),type:ar.stringLiteral("audio_input")});a.s(["AudioInput",0,at],29483);var ar=ar;let au=ar.object({customSessionId:ar.property("custom_session_id",ar.string().optional()),type:ar.stringLiteral("pause_assistant_message")});a.s(["PauseAssistantMessage",0,au],27723);var ar=ar;let av=ar.object({customSessionId:ar.property("custom_session_id",ar.string().optional()),type:ar.stringLiteral("resume_assistant_message")});a.s(["ResumeAssistantMessage",0,av],50474);var ar=ar,ar=ar,ar=ar;let aw=ar.stringLiteral("linear16");a.s(["Encoding",0,aw],57852);let ax=ar.object({channels:ar.number(),codec:ar.string().optional(),encoding:aw,sampleRate:ar.property("sample_rate",ar.number())});a.s(["AudioConfiguration",0,ax],7313);var ar=ar,ar=ar;let ay=ar.enum_(["web_search","hang_up"]);a.s(["BuiltInTool",0,ay],28856);let az=ar.object({fallbackContent:ar.property("fallback_content",ar.string().optional()),name:ay});a.s(["BuiltinToolConfig",0,az],8899);var ar=ar,ar=ar;let aA=ar.enum_(["persistent","temporary"]);a.s(["ContextType",0,aA],41983);let aB=ar.object({text:ar.string(),type:aA.optional()});a.s(["Context",0,aB],1120);var ar=ar;let aC=ar.undiscriminatedUnion([ar.string(),ar.number(),ar.boolean()]);a.s(["SessionSettingsVariablesValue",0,aC],66646);var ar=ar,ar=ar;let aD=ar.enum_(["builtin","function"]);a.s(["ToolType",0,aD],89046);let aE=ar.object({description:ar.string().optional(),fallbackContent:ar.property("fallback_content",ar.string().optional()),name:ar.string(),parameters:ar.string(),type:aD});a.s(["Tool",0,aE],61664);let aF=ar.object({audio:ax.optional(),builtinTools:ar.property("builtin_tools",ar.list(az).optional()),context:aB.optional(),customSessionId:ar.property("custom_session_id",ar.string().optional()),languageModelApiKey:ar.property("language_model_api_key",ar.string().optional()),metadata:ar.record(ar.string(),ar.unknown()).optional(),systemPrompt:ar.property("system_prompt",ar.string().optional()),tools:ar.list(aE).optional(),type:ar.stringLiteral("session_settings"),variables:ar.record(ar.string(),aC).optional(),voiceId:ar.property("voice_id",ar.string().optional())});a.s(["SessionSettings",0,aF],97549);var ar=ar,ar=ar;let aG=ar.stringLiteral("warn");a.s(["ErrorLevel",0,aG],65293);let aH=ar.object({code:ar.string().optional(),content:ar.string().optional(),customSessionId:ar.property("custom_session_id",ar.string().optional()),error:ar.string(),level:aG.optional(),toolCallId:ar.property("tool_call_id",ar.string()),toolType:ar.property("tool_type",aD.optional()),type:ar.stringLiteral("tool_error")});a.s(["ToolErrorMessage",0,aH],42976);var ar=ar;let aI=ar.object({content:ar.string(),customSessionId:ar.property("custom_session_id",ar.string().optional()),toolCallId:ar.property("tool_call_id",ar.string()),toolName:ar.property("tool_name",ar.string().optional()),toolType:ar.property("tool_type",aD.optional()),type:ar.stringLiteral("tool_response")});a.s(["ToolResponseMessage",0,aI],52290);var ar=ar;let aJ=ar.object({customSessionId:ar.property("custom_session_id",ar.string().optional()),text:ar.string(),type:ar.stringLiteral("user_input")});a.s(["UserInput",0,aJ],49839);let aK=ar.undiscriminatedUnion([at,aF,aJ,as,aI,aH,au,av]);a.s(["PublishEvent",0,aK],22060),a.s([],70386),a.i(70386),a.s([],76333),a.i(76333),a.s([],85902),a.i(85902);var ar=ar,ar=ar,ar=ar;let aL=ar.object({customSessionId:ar.property("custom_session_id",ar.string().optional()),type:ar.stringLiteral("assistant_end")});a.s(["AssistantEnd",0,aL],62823);var ar=ar,ar=ar,ar=ar;let aM=ar.undiscriminatedUnion([aI,aH]);a.s(["ChatMessageToolResult",0,aM],42665);var ar=ar;let aN=ar.enum_(["assistant","system","user","all","tool","context"]);a.s(["Role",0,aN],61209);var ar=ar;let aO=ar.object({customSessionId:ar.property("custom_session_id",ar.string().optional()),name:ar.string(),parameters:ar.string(),responseRequired:ar.property("response_required",ar.boolean()),toolCallId:ar.property("tool_call_id",ar.string()),toolType:ar.property("tool_type",aD),type:ar.stringLiteral("tool_call")});a.s(["ToolCallMessage",0,aO],33082);let aP=ar.object({content:ar.string().optional(),role:aN,toolCall:ar.property("tool_call",aO.optional()),toolResult:ar.property("tool_result",aM.optional())});a.s(["ChatMessage",0,aP],30240);var ar=ar,ar=ar,ar=ar;let aQ=ar.object({admiration:ar.property("Admiration",ar.number()),adoration:ar.property("Adoration",ar.number()),aestheticAppreciation:ar.property("Aesthetic Appreciation",ar.number()),amusement:ar.property("Amusement",ar.number()),anger:ar.property("Anger",ar.number()),anxiety:ar.property("Anxiety",ar.number()),awe:ar.property("Awe",ar.number()),awkwardness:ar.property("Awkwardness",ar.number()),boredom:ar.property("Boredom",ar.number()),calmness:ar.property("Calmness",ar.number()),concentration:ar.property("Concentration",ar.number()),confusion:ar.property("Confusion",ar.number()),contemplation:ar.property("Contemplation",ar.number()),contempt:ar.property("Contempt",ar.number()),contentment:ar.property("Contentment",ar.number()),craving:ar.property("Craving",ar.number()),desire:ar.property("Desire",ar.number()),determination:ar.property("Determination",ar.number()),disappointment:ar.property("Disappointment",ar.number()),disgust:ar.property("Disgust",ar.number()),distress:ar.property("Distress",ar.number()),doubt:ar.property("Doubt",ar.number()),ecstasy:ar.property("Ecstasy",ar.number()),embarrassment:ar.property("Embarrassment",ar.number()),empathicPain:ar.property("Empathic Pain",ar.number()),entrancement:ar.property("Entrancement",ar.number()),envy:ar.property("Envy",ar.number()),excitement:ar.property("Excitement",ar.number()),fear:ar.property("Fear",ar.number()),guilt:ar.property("Guilt",ar.number()),horror:ar.property("Horror",ar.number()),interest:ar.property("Interest",ar.number()),joy:ar.property("Joy",ar.number()),love:ar.property("Love",ar.number()),nostalgia:ar.property("Nostalgia",ar.number()),pain:ar.property("Pain",ar.number()),pride:ar.property("Pride",ar.number()),realization:ar.property("Realization",ar.number()),relief:ar.property("Relief",ar.number()),romance:ar.property("Romance",ar.number()),sadness:ar.property("Sadness",ar.number()),satisfaction:ar.property("Satisfaction",ar.number()),shame:ar.property("Shame",ar.number()),surpriseNegative:ar.property("Surprise (negative)",ar.number()),surprisePositive:ar.property("Surprise (positive)",ar.number()),sympathy:ar.property("Sympathy",ar.number()),tiredness:ar.property("Tiredness",ar.number()),triumph:ar.property("Triumph",ar.number())});a.s(["EmotionScores",0,aQ],93470);let aR=ar.object({scores:aQ});a.s(["ProsodyInference",0,aR],87578);let aS=ar.object({prosody:aR.optional()});a.s(["Inference",0,aS],34664);let aT=ar.object({customSessionId:ar.property("custom_session_id",ar.string().optional()),fromText:ar.property("from_text",ar.boolean()),id:ar.string().optional(),isQuickResponse:ar.property("is_quick_response",ar.boolean()),language:ar.string().optional(),message:aP,models:aS,type:ar.stringLiteral("assistant_message")});a.s(["AssistantMessage",0,aT],81038);var ar=ar;let aU=ar.object({customSessionId:ar.property("custom_session_id",ar.string().optional()),id:ar.string().optional(),models:aS,type:ar.stringLiteral("assistant_prosody")});a.s(["AssistantProsody",0,aU],20885);var ar=ar;let aV=ar.object({customSessionId:ar.property("custom_session_id",ar.string().optional()),data:ar.string(),id:ar.string(),index:ar.number(),type:ar.stringLiteral("audio_output")});a.s(["AudioOutput",0,aV],65984);var ar=ar;let aW=ar.object({chatGroupId:ar.property("chat_group_id",ar.string()),chatId:ar.property("chat_id",ar.string()),customSessionId:ar.property("custom_session_id",ar.string().optional()),requestId:ar.property("request_id",ar.string().optional()),type:ar.stringLiteral("chat_metadata")});a.s(["ChatMetadata",0,aW],6177);var ar=ar;let aX=ar.object({customSessionId:ar.property("custom_session_id",ar.string().optional()),time:ar.number(),type:ar.stringLiteral("user_interruption")});a.s(["UserInterruption",0,aX],53246);var ar=ar,ar=ar;let aY=ar.object({begin:ar.number(),end:ar.number()});a.s(["MillisecondInterval",0,aY],10683);let aZ=ar.object({customSessionId:ar.property("custom_session_id",ar.string().optional()),fromText:ar.property("from_text",ar.boolean()),interim:ar.boolean(),language:ar.string().optional(),message:aP,models:aS,time:aY,type:ar.stringLiteral("user_message")});a.s(["UserMessage",0,aZ],57634);var ar=ar;let a$=ar.object({code:ar.string(),customSessionId:ar.property("custom_session_id",ar.string().optional()),message:ar.string(),requestId:ar.property("request_id",ar.string().optional()),slug:ar.string(),type:ar.stringLiteral("error")});a.s(["WebSocketError",0,a$],73002);let a_=ar.undiscriminatedUnion([aL,aT,aU,aV,aW,a$,aX,aZ,aO,aI,aH,aF]);a.s(["SubscribeEvent",0,a_],36185);let a0=ar.undiscriminatedUnion([a_]);a.s(["ChatSocketResponse",0,a0],3907),a.i(3907),a.s([],80276),a.i(80276),a.s([],97454),a.i(97454),a.s(["ChatSocketResponse",0,a0],22088),a.i(22088),a.s([],57132),a.i(57132),a.i(22060),a.s(["PublishEvent",0,aK],87004),a.i(87004),a.s(["ChatSocketResponse",0,a0,"PublishEvent",0,aK,"SubscribeEvent",0,a_],87306);var a1=a.i(87306);a.s([],5285),a.i(5285);var ar=ar,ar=ar,ar=ar;let a2=ar.enum_(["web_search","hang_up"]);a.s(["PostedBuiltinToolName",0,a2],7191);let a3=ar.object({fallbackContent:ar.property("fallback_content",ar.string().optional()),name:a2});a.s(["PostedBuiltinTool",0,a3],15459);var ar=ar;let a4=ar.object({id:ar.string().optional(),text:ar.string().optional(),version:ar.number().optional()});a.s(["PostedConfigPromptSpec",0,a4],80667);var ar=ar;let a5=ar.object({allowShortResponses:ar.property("allow_short_responses",ar.boolean().optional())});a.s(["PostedEllmModel",0,a5],71927);var ar=ar,ar=ar;let a6=ar.object({enabled:ar.boolean(),text:ar.string().optional()});a.s(["PostedEventMessageSpec",0,a6],51394);let a7=ar.object({onInactivityTimeout:ar.property("on_inactivity_timeout",a6.optional()),onMaxDurationTimeout:ar.property("on_max_duration_timeout",a6.optional()),onNewChat:ar.property("on_new_chat",a6.optional())});a.s(["PostedEventMessageSpecs",0,a7],43507);var ar=ar,ar=ar;let a8=ar.enum_(["claude-3-7-sonnet-latest","claude-3-5-sonnet-latest","claude-3-5-haiku-latest","claude-3-5-sonnet-20240620","claude-3-opus-20240229","claude-3-sonnet-20240229","claude-3-haiku-20240307","claude-sonnet-4-20250514","claude-sonnet-4-5-20250929","claude-haiku-4-5-20251001","us.anthropic.claude-3-5-haiku-20241022-v1:0","us.anthropic.claude-3-5-sonnet-20240620-v1:0","us.anthropic.claude-3-haiku-20240307-v1:0","gpt-oss-120b","qwen-3-235b-a22b","qwen-3-235b-a22b-instruct-2507","qwen-3-235b-a22b-thinking-2507","gemini-1.5-pro","gemini-1.5-flash","gemini-1.5-pro-002","gemini-1.5-flash-002","gemini-2.0-flash","gemini-2.5-flash","gemini-2.5-flash-preview-04-17","gpt-4-turbo","gpt-4-turbo-preview","gpt-3.5-turbo-0125","gpt-3.5-turbo","gpt-4o","gpt-4o-mini","gpt-4.1","gpt-5","gpt-5-mini","gpt-5-nano","gpt-4o-priority","gpt-4o-mini-priority","gpt-4.1-priority","gpt-5-priority","gpt-5-mini-priority","gpt-5-nano-priority","gemma-7b-it","llama3-8b-8192","llama3-70b-8192","llama-3.1-70b-versatile","llama-3.3-70b-versatile","llama-3.1-8b-instant","moonshotai/kimi-k2-instruct","accounts/fireworks/models/mixtral-8x7b-instruct","accounts/fireworks/models/llama-v3p1-405b-instruct","accounts/fireworks/models/llama-v3p1-70b-instruct","accounts/fireworks/models/llama-v3p1-8b-instruct","sonar","sonar-pro","sambanova","DeepSeek-R1-Distill-Llama-70B","Llama-4-Maverick-17B-128E-Instruct","Qwen3-32B","grok-4-fast-non-reasoning-latest","ellm","custom-language-model","hume-evi-3-web-search"]);a.s(["LanguageModelType",0,a8],32748);var ar=ar;let a9=ar.enum_(["GROQ","OPEN_AI","FIREWORKS","ANTHROPIC","CUSTOM_LANGUAGE_MODEL","GOOGLE","HUME_AI","AMAZON_BEDROCK","PERPLEXITY","SAMBANOVA","CEREBRAS"]);a.s(["ModelProviderEnum",0,a9],25939);let ba=ar.object({modelProvider:ar.property("model_provider",a9.optional()),modelResource:ar.property("model_resource",a8.optional()),temperature:ar.number().optional()});a.s(["PostedLanguageModel",0,ba],3509);var ar=ar;let bb=ar.object({enabled:ar.boolean().optional(),intervalSecs:ar.property("interval_secs",ar.number().optional())});a.s(["PostedNudgeSpec",0,bb],46002);var ar=ar,ar=ar;let bc=ar.object({durationSecs:ar.property("duration_secs",ar.number().optional()),enabled:ar.boolean()});a.s(["PostedTimeoutSpecsInactivity",0,bc],7946);var ar=ar;let bd=ar.object({durationSecs:ar.property("duration_secs",ar.number().optional()),enabled:ar.boolean()});a.s(["PostedTimeoutSpecsMaxDuration",0,bd],6656);let be=ar.object({inactivity:bc.optional(),maxDuration:ar.property("max_duration",bd.optional())});a.s(["PostedTimeoutSpecs",0,be],84462);var ar=ar;let bf=ar.object({id:ar.string(),version:ar.number().optional()});a.s(["PostedUserDefinedToolSpec",0,bf],31445);var ar=ar,ar=ar;let bg=ar.enum_(["chat_started","chat_ended","tool_call"]);a.s(["PostedWebhookEventType",0,bg],28861);let bh=ar.object({events:ar.list(bg),url:ar.string()});a.s(["PostedWebhookSpec",0,bh],33746);var ar=ar,ar=ar,ar=ar;let bi=ar.enum_(["HUME_AI","CUSTOM_VOICE"]);a.s(["VoiceProvider",0,bi],96786);let bj=ar.object({id:ar.string(),provider:bi.optional()});a.s(["VoiceId",0,bj],81037);var ar=ar;let bk=ar.object({name:ar.string(),provider:bi.optional()});a.s(["VoiceName",0,bk],66798);let bl=ar.undiscriminatedUnion([bj,bk]);a.s(["VoiceRef",0,bl],52567);let bm=ar.object({builtinTools:ar.property("builtin_tools",ar.list(a3.optional()).optional()),ellmModel:ar.property("ellm_model",a5.optional()),eventMessages:ar.property("event_messages",a7.optional()),eviVersion:ar.property("evi_version",ar.string()),languageModel:ar.property("language_model",ba.optional()),name:ar.string(),nudges:bb.optional(),prompt:a4.optional(),timeouts:be.optional(),tools:ar.list(bf.optional()).optional(),versionDescription:ar.property("version_description",ar.string().optional()),voice:bl.optional(),webhooks:ar.list(bh.optional()).optional()});var ar=ar;let bn=ar.object({name:ar.string()});var ar=ar;let bo=ar.object({builtinTools:ar.property("builtin_tools",ar.list(a3.optional()).optional()),ellmModel:ar.property("ellm_model",a5.optional()),eventMessages:ar.property("event_messages",a7.optional()),eviVersion:ar.property("evi_version",ar.string()),languageModel:ar.property("language_model",ba.optional()),nudges:bb.optional(),prompt:a4.optional(),timeouts:be.optional(),tools:ar.list(bf.optional()).optional(),versionDescription:ar.property("version_description",ar.string().optional()),voice:bl.optional(),webhooks:ar.list(bh.optional()).optional()});var ar=ar;let bp=ar.object({versionDescription:ar.property("version_description",ar.string().optional())});a.s(["PostedConfig",0,bm,"PostedConfigName",0,bn,"PostedConfigVersion",0,bo,"PostedConfigVersionDescription",0,bp],83795),a.i(83795),a.s([],93810),a.i(93810),a.s([],74953),a.i(74953),a.s(["PostedConfig",0,bm,"PostedConfigName",0,bn,"PostedConfigVersion",0,bo,"PostedConfigVersionDescription",0,bp],85840),a.i(85840),a.s(["PostedConfig",0,bm,"PostedConfigName",0,bn,"PostedConfigVersion",0,bo,"PostedConfigVersionDescription",0,bp],91195);var bq=a.i(91195);a.s([],89697),a.i(89697);var ar=ar;let br=ar.undiscriminatedUnion([a_]);a.s(["ControlPlaneSocketResponse",0,br],46293),a.i(46293),a.s([],72553),a.i(72553),a.s([],54520),a.i(54520),a.s(["ControlPlaneSocketResponse",0,br],90614),a.i(90614),a.s(["ControlPlaneSocketResponse",0,br],66020);var bs=a.i(66020);a.s([],41191),a.i(41191);var ar=ar;let bt=ar.object({name:ar.string(),text:ar.string(),versionDescription:ar.property("version_description",ar.string().optional())});var ar=ar;let bu=ar.object({name:ar.string()});var ar=ar;let bv=ar.object({text:ar.string(),versionDescription:ar.property("version_description",ar.string().optional())});var ar=ar;let bw=ar.object({versionDescription:ar.property("version_description",ar.string().optional())});a.s(["PostedPrompt",0,bt,"PostedPromptName",0,bu,"PostedPromptVersion",0,bv,"PostedPromptVersionDescription",0,bw],8710),a.i(8710),a.s([],73899),a.i(73899),a.s([],12528),a.i(12528);var ar=ar;let bx=ar.object({createdOn:ar.property("created_on",ar.number()),id:ar.string(),modifiedOn:ar.property("modified_on",ar.number()),name:ar.string(),text:ar.string(),version:ar.number(),versionDescription:ar.property("version_description",ar.string().optional()),versionType:ar.property("version_type",ar.string())});a.s(["ReturnPrompt",0,bx],79047);let by=bx.optional();a.s(["Response",0,by],86102);var bz=a.i(86102);let bA=bx.optional();a.s(["Response",0,bA],36508);var bB=a.i(36508);let bC=bx.optional();a.s(["Response",0,bC],69070);var bD=a.i(69070);let bE=bx.optional();a.s(["Response",0,bE],54475);var bF=a.i(54475);a.s(["PostedPrompt",0,bt,"PostedPromptName",0,bu,"PostedPromptVersion",0,bv,"PostedPromptVersionDescription",0,bw,"createPrompt",0,bz,"createPromptVersion",0,bB,"getPromptVersion",0,bD,"updatePromptDescription",0,bF],22349),a.i(22349),a.s(["PostedPrompt",0,bt,"PostedPromptName",0,bu,"PostedPromptVersion",0,bv,"PostedPromptVersionDescription",0,bw,"createPrompt",()=>bz,"createPromptVersion",()=>bB,"getPromptVersion",()=>bD,"updatePromptDescription",()=>bF],26799);var bG=a.i(26799);a.s([],72038),a.i(72038);var ar=ar;let bH=ar.object({description:ar.string().optional(),fallbackContent:ar.property("fallback_content",ar.string().optional()),name:ar.string(),parameters:ar.string(),versionDescription:ar.property("version_description",ar.string().optional())});var ar=ar;let bI=ar.object({name:ar.string()});var ar=ar;let bJ=ar.object({description:ar.string().optional(),fallbackContent:ar.property("fallback_content",ar.string().optional()),parameters:ar.string(),versionDescription:ar.property("version_description",ar.string().optional())});var ar=ar;let bK=ar.object({versionDescription:ar.property("version_description",ar.string().optional())});a.s(["PostedUserDefinedTool",0,bH,"PostedUserDefinedToolName",0,bI,"PostedUserDefinedToolVersion",0,bJ,"PostedUserDefinedToolVersionDescription",0,bK],47441),a.i(47441),a.s([],60216),a.i(60216),a.s([],40833),a.i(40833);var ar=ar,ar=ar;let bL=ar.enum_(["BUILTIN","FUNCTION"]);a.s(["ReturnUserDefinedToolToolType",0,bL],3626);var ar=ar;let bM=ar.enum_(["FIXED","LATEST"]);a.s(["ReturnUserDefinedToolVersionType",0,bM],65833);let bN=ar.object({createdOn:ar.property("created_on",ar.number()),description:ar.string().optional(),fallbackContent:ar.property("fallback_content",ar.string().optional()),id:ar.string(),modifiedOn:ar.property("modified_on",ar.number()),name:ar.string(),parameters:ar.string(),toolType:ar.property("tool_type",bL),version:ar.number(),versionDescription:ar.property("version_description",ar.string().optional()),versionType:ar.property("version_type",bM)});a.s(["ReturnUserDefinedTool",0,bN],15287);let bO=bN.optional();a.s(["Response",0,bO],60070);var bP=a.i(60070);let bQ=bN.optional();a.s(["Response",0,bQ],25024);var bR=a.i(25024);let bS=bN.optional();a.s(["Response",0,bS],77582);var bT=a.i(77582);let bU=bN.optional();a.s(["Response",0,bU],25261);var bV=a.i(25261);a.s(["PostedUserDefinedTool",0,bH,"PostedUserDefinedToolName",0,bI,"PostedUserDefinedToolVersion",0,bJ,"PostedUserDefinedToolVersionDescription",0,bK,"createTool",0,bP,"createToolVersion",0,bR,"getToolVersion",0,bT,"updateToolDescription",0,bV],51131),a.i(51131),a.s(["PostedUserDefinedTool",0,bH,"PostedUserDefinedToolName",0,bI,"PostedUserDefinedToolVersion",0,bJ,"PostedUserDefinedToolVersionDescription",0,bK,"createTool",()=>bP,"createToolVersion",()=>bR,"getToolVersion",()=>bT,"updateToolDescription",()=>bV],78087);var bW=a.i(78087);a.s(["ChatSocketResponse",0,a0,"ControlPlaneSocketResponse",0,br,"PostedConfig",0,bm,"PostedConfigName",0,bn,"PostedConfigVersion",0,bo,"PostedConfigVersionDescription",0,bp,"PostedPrompt",0,bt,"PostedPromptName",0,bu,"PostedPromptVersion",0,bv,"PostedPromptVersionDescription",0,bw,"PostedUserDefinedTool",0,bH,"PostedUserDefinedToolName",0,bI,"PostedUserDefinedToolVersion",0,bJ,"PostedUserDefinedToolVersionDescription",0,bK,"PublishEvent",0,aK,"chat",0,a1,"configs",0,bq,"controlPlane",0,bs,"prompts",0,bG,"tools",0,bW],77213),a.i(77213),a.s([],28842),a.i(28842),a.i(62823),a.i(35704),a.i(81038),a.i(20885),a.i(7313),a.i(29483),a.i(65984),a.i(28856),a.i(8899),a.i(30240),a.i(42665),a.i(6177);var ar=ar,ar=ar;let bX=ar.object({channels:ar.number().optional(),encoding:aw.optional(),sampleRate:ar.property("sample_rate",ar.number().optional())});a.s(["ConnectSessionSettingsAudio",0,bX],18868);var ar=ar;let bY=ar.object({text:ar.string().optional(),type:aA.optional()});a.s(["ConnectSessionSettingsContext",0,bY],33083);var ar=ar;let bZ=ar.undiscriminatedUnion([ar.string(),ar.number(),ar.boolean()]);a.s(["ConnectSessionSettingsVariablesValue",0,bZ],85862);let b$=ar.object({audio:bX.optional(),context:bY.optional(),customSessionId:ar.property("custom_session_id",ar.string().optional()),eventLimit:ar.property("event_limit",ar.number().optional()),languageModelApiKey:ar.property("language_model_api_key",ar.string().optional()),systemPrompt:ar.property("system_prompt",ar.string().optional()),voiceId:ar.property("voice_id",ar.string().optional()),variables:ar.record(ar.string(),bZ).optional()});a.s(["ConnectSessionSettings",0,b$],30515),a.i(30515),a.i(18868),a.i(33083),a.i(85862),a.i(1120),a.i(41983);var ar=ar;let b_=ar.undiscriminatedUnion([aF,aJ,as,aI,aH,au,av]);a.s(["ControlPlanePublishEvent",0,b_],18061),a.i(18061),a.i(93470),a.i(57852),a.i(65293);var ar=ar;let b0=ar.object({code:ar.string().optional(),error:ar.string().optional(),message:ar.string().optional()});a.s(["ErrorResponse",0,b0],36502),a.i(36502);var ar=ar,ar=ar,ar=ar;let b1=ar.undiscriminatedUnion([ar.string(),ar.number()]);a.s(["ValidationErrorLocItem",0,b1],18476);let b2=ar.object({loc:ar.list(b1),msg:ar.string(),type:ar.string()});a.s(["ValidationError",0,b2],74592);let b3=ar.object({detail:ar.list(b2).optional()});a.s(["HttpValidationError",0,b3],24654),a.i(24654),a.i(34664);var ar=ar;let b4=ar.undiscriminatedUnion([aL,aT,aU,aW,a$,aX,aZ,aO,aI,aH,aF]);a.s(["JsonMessage",0,b4],21167),a.i(21167),a.i(32748),a.i(10683),a.i(25939),a.i(27723),a.i(15459),a.i(7191),a.i(80667),a.i(71927),a.i(51394),a.i(43507),a.i(3509),a.i(46002);var ar=ar;let b5=ar.object({durationSecs:ar.property("duration_secs",ar.number().optional()),enabled:ar.boolean()});a.s(["PostedTimeoutSpec",0,b5],72237),a.i(72237),a.i(84462),a.i(7946),a.i(6656),a.i(31445),a.i(28861),a.i(33746),a.i(87578),a.i(50474);var ar=ar,ar=ar;let b6=ar.enum_(["BUILTIN","FUNCTION"]);a.s(["ReturnBuiltinToolToolType",0,b6],73612);let b7=ar.object({fallbackContent:ar.property("fallback_content",ar.string().optional()),name:ar.string(),toolType:ar.property("tool_type",b6)});a.s(["ReturnBuiltinTool",0,b7],49825),a.i(49825),a.i(73612);var ar=ar,ar=ar;let b8=ar.enum_(["ACTIVE","USER_ENDED","USER_TIMEOUT","MAX_DURATION_TIMEOUT","INACTIVITY_TIMEOUT","ERROR"]);a.s(["ReturnChatStatus",0,b8],15701);var ar=ar;let b9=ar.object({id:ar.string(),version:ar.number().optional()});a.s(["ReturnConfigSpec",0,b9],94878);let ca=ar.object({chatGroupId:ar.property("chat_group_id",ar.string()),config:b9.optional(),endTimestamp:ar.property("end_timestamp",ar.number().optional()),eventCount:ar.property("event_count",ar.number().optional()),id:ar.string(),metadata:ar.string().optional(),startTimestamp:ar.property("start_timestamp",ar.number()),status:b8});a.s(["ReturnChat",0,ca],17797),a.i(17797);var ar=ar,ar=ar;let cb=ar.enum_(["QUEUED","IN_PROGRESS","COMPLETE","ERROR","CANCELLED"]);a.s(["ReturnChatAudioReconstructionStatus",0,cb],42395);let cc=ar.object({filename:ar.string().optional(),id:ar.string(),modifiedAt:ar.property("modified_at",ar.number().optional()),signedAudioUrl:ar.property("signed_audio_url",ar.string().optional()),signedUrlExpirationTimestampMillis:ar.property("signed_url_expiration_timestamp_millis",ar.number().optional()),status:cb,userId:ar.property("user_id",ar.string())});a.s(["ReturnChatAudioReconstruction",0,cc],35674),a.i(35674),a.i(42395);var ar=ar,ar=ar;let cd=ar.enum_(["USER","AGENT","SYSTEM","TOOL"]);a.s(["ReturnChatEventRole",0,cd],34100);var ar=ar;let ce=ar.enum_(["FUNCTION_CALL","FUNCTION_CALL_RESPONSE","CHAT_END_MESSAGE","AGENT_MESSAGE","SYSTEM_PROMPT","USER_RECORDING_START_MESSAGE","RESUME_ONSET","USER_INTERRUPTION","CHAT_START_MESSAGE","PAUSE_ONSET","USER_MESSAGE"]);a.s(["ReturnChatEventType",0,ce],2024);let cf=ar.object({chatId:ar.property("chat_id",ar.string()),emotionFeatures:ar.property("emotion_features",ar.string().optional()),id:ar.string(),messageText:ar.property("message_text",ar.string().optional()),metadata:ar.string().optional(),relatedEventId:ar.property("related_event_id",ar.string().optional()),role:cd,timestamp:ar.number(),type:ce});a.s(["ReturnChatEvent",0,cf],21161),a.i(21161),a.i(34100),a.i(2024);var ar=ar;let cg=ar.object({active:ar.boolean().optional(),firstStartTimestamp:ar.property("first_start_timestamp",ar.number()),id:ar.string(),mostRecentChatId:ar.property("most_recent_chat_id",ar.string().optional()),mostRecentConfig:ar.property("most_recent_config",b9.optional()),mostRecentStartTimestamp:ar.property("most_recent_start_timestamp",ar.number()),numChats:ar.property("num_chats",ar.number())});a.s(["ReturnChatGroup",0,cg],96587),a.i(96587);var ar=ar,ar=ar;let ch=ar.enum_(["ASC","DESC"]);a.s(["ReturnChatGroupPagedAudioReconstructionsPaginationDirection",0,ch],25290);let ci=ar.object({audioReconstructionsPage:ar.property("audio_reconstructions_page",ar.list(cc)),id:ar.string(),numChats:ar.property("num_chats",ar.number()),pageNumber:ar.property("page_number",ar.number()),pageSize:ar.property("page_size",ar.number()),paginationDirection:ar.property("pagination_direction",ch),totalPages:ar.property("total_pages",ar.number()),userId:ar.property("user_id",ar.string())});a.s(["ReturnChatGroupPagedAudioReconstructions",0,ci],31744),a.i(31744),a.i(25290);var ar=ar,ar=ar;let cj=ar.enum_(["ASC","DESC"]);a.s(["ReturnChatGroupPagedChatsPaginationDirection",0,cj],83617);let ck=ar.object({active:ar.boolean().optional(),chatsPage:ar.property("chats_page",ar.list(ca)),firstStartTimestamp:ar.property("first_start_timestamp",ar.number()),id:ar.string(),mostRecentStartTimestamp:ar.property("most_recent_start_timestamp",ar.number()),numChats:ar.property("num_chats",ar.number()),pageNumber:ar.property("page_number",ar.number()),pageSize:ar.property("page_size",ar.number()),paginationDirection:ar.property("pagination_direction",cj),totalPages:ar.property("total_pages",ar.number())});a.s(["ReturnChatGroupPagedChats",0,ck],17414),a.i(17414),a.i(83617);var ar=ar,ar=ar;let cl=ar.enum_(["ASC","DESC"]);a.s(["ReturnChatGroupPagedEventsPaginationDirection",0,cl],95020);let cm=ar.object({eventsPage:ar.property("events_page",ar.list(cf)),id:ar.string(),pageNumber:ar.property("page_number",ar.number()),pageSize:ar.property("page_size",ar.number()),paginationDirection:ar.property("pagination_direction",cl),totalPages:ar.property("total_pages",ar.number())});a.s(["ReturnChatGroupPagedEvents",0,cm],99568),a.i(99568),a.i(95020);var ar=ar,ar=ar;let cn=ar.enum_(["ASC","DESC"]);a.s(["ReturnChatPagedEventsPaginationDirection",0,cn],74926);var ar=ar;let co=ar.enum_(["ACTIVE","USER_ENDED","USER_TIMEOUT","MAX_DURATION_TIMEOUT","INACTIVITY_TIMEOUT","ERROR"]);a.s(["ReturnChatPagedEventsStatus",0,co],83375);let cp=ar.object({chatGroupId:ar.property("chat_group_id",ar.string()),config:b9.optional(),endTimestamp:ar.property("end_timestamp",ar.number().optional()),eventsPage:ar.property("events_page",ar.list(cf)),id:ar.string(),metadata:ar.string().optional(),pageNumber:ar.property("page_number",ar.number()),pageSize:ar.property("page_size",ar.number()),paginationDirection:ar.property("pagination_direction",cn),startTimestamp:ar.property("start_timestamp",ar.number()),status:co,totalPages:ar.property("total_pages",ar.number())});a.s(["ReturnChatPagedEvents",0,cp],25244),a.i(25244),a.i(74926),a.i(83375),a.i(15701);var ar=ar,ar=ar;let cq=ar.object({allowShortResponses:ar.property("allow_short_responses",ar.boolean())});a.s(["ReturnEllmModel",0,cq],48654);var ar=ar,ar=ar;let cr=ar.object({enabled:ar.boolean(),text:ar.string().optional()});a.s(["ReturnEventMessageSpec",0,cr],15773);let cs=ar.object({onInactivityTimeout:ar.property("on_inactivity_timeout",cr.optional()),onMaxDurationTimeout:ar.property("on_max_duration_timeout",cr.optional()),onNewChat:ar.property("on_new_chat",cr.optional())});a.s(["ReturnEventMessageSpecs",0,cs],20331);var ar=ar;let ct=ar.object({modelProvider:ar.property("model_provider",a9.optional()),modelResource:ar.property("model_resource",a8.optional()),temperature:ar.number().optional()});a.s(["ReturnLanguageModel",0,ct],63847);var ar=ar;let cu=ar.object({enabled:ar.boolean(),intervalSecs:ar.property("interval_secs",ar.number().optional())});a.s(["ReturnNudgeSpec",0,cu],25817);var ar=ar,ar=ar;let cv=ar.object({durationSecs:ar.property("duration_secs",ar.number().optional()),enabled:ar.boolean()});a.s(["ReturnTimeoutSpec",0,cv],33629);let cw=ar.object({inactivity:cv,maxDuration:ar.property("max_duration",cv)});a.s(["ReturnTimeoutSpecs",0,cw],85162);var ar=ar;let cx=ar.object({compatibleOctaveModels:ar.property("compatible_octave_models",ar.list(ar.string()).optional()),id:ar.string().optional(),name:ar.string().optional(),provider:bi.optional()});a.s(["ReturnVoice",0,cx],27135);var ar=ar,ar=ar;let cy=ar.enum_(["chat_started","chat_ended","tool_call"]);a.s(["ReturnWebhookEventType",0,cy],13072);let cz=ar.object({events:ar.list(cy),url:ar.string()});a.s(["ReturnWebhookSpec",0,cz],90266);let cA=ar.object({builtinTools:ar.property("builtin_tools",ar.list(b7.optional()).optional()),createdOn:ar.property("created_on",ar.number().optional()),ellmModel:ar.property("ellm_model",cq.optional()),eventMessages:ar.property("event_messages",cs.optional()),eviVersion:ar.property("evi_version",ar.string().optional()),id:ar.string().optional(),languageModel:ar.property("language_model",ct.optional()),modifiedOn:ar.property("modified_on",ar.number().optional()),name:ar.string().optional(),nudges:cu.optional(),prompt:bx.optional(),timeouts:cw.optional(),tools:ar.list(bN.optional()).optional(),version:ar.number().optional(),versionDescription:ar.property("version_description",ar.string().optional()),voice:cx.optional(),webhooks:ar.list(cz.optional()).optional()});a.s(["ReturnConfig",0,cA],56966),a.i(56966),a.i(94878),a.i(48654),a.i(15773),a.i(20331),a.i(63847),a.i(25817);var ar=ar,ar=ar;let cB=ar.enum_(["ASC","DESC"]);a.s(["ReturnPagedChatGroupsPaginationDirection",0,cB],7593);let cC=ar.object({chatGroupsPage:ar.property("chat_groups_page",ar.list(cg)),pageNumber:ar.property("page_number",ar.number()),pageSize:ar.property("page_size",ar.number()),paginationDirection:ar.property("pagination_direction",cB),totalPages:ar.property("total_pages",ar.number())});a.s(["ReturnPagedChatGroups",0,cC],29129),a.i(29129),a.i(7593);var ar=ar,ar=ar;let cD=ar.enum_(["ASC","DESC"]);a.s(["ReturnPagedChatsPaginationDirection",0,cD],10674);let cE=ar.object({chatsPage:ar.property("chats_page",ar.list(ca)),pageNumber:ar.property("page_number",ar.number()),pageSize:ar.property("page_size",ar.number()),paginationDirection:ar.property("pagination_direction",cD),totalPages:ar.property("total_pages",ar.number())});a.s(["ReturnPagedChats",0,cE],25100),a.i(25100),a.i(10674);var ar=ar;let cF=ar.object({configsPage:ar.property("configs_page",ar.list(cA).optional()),pageNumber:ar.property("page_number",ar.number().optional()),pageSize:ar.property("page_size",ar.number().optional()),totalPages:ar.property("total_pages",ar.number())});a.s(["ReturnPagedConfigs",0,cF],19118),a.i(19118);var ar=ar;let cG=ar.object({pageNumber:ar.property("page_number",ar.number()),pageSize:ar.property("page_size",ar.number()),promptsPage:ar.property("prompts_page",ar.list(bx.optional())),totalPages:ar.property("total_pages",ar.number())});a.s(["ReturnPagedPrompts",0,cG],19452),a.i(19452);var ar=ar;let cH=ar.object({pageNumber:ar.property("page_number",ar.number()),pageSize:ar.property("page_size",ar.number()),toolsPage:ar.property("tools_page",ar.list(bN.optional())),totalPages:ar.property("total_pages",ar.number())});a.s(["ReturnPagedUserDefinedTools",0,cH],95302),a.i(95302),a.i(79047);var ar=ar;let cI=ar.enum_(["FIXED","LATEST"]);a.s(["ReturnPromptVersionType",0,cI],69719),a.i(69719),a.i(33629),a.i(85162),a.i(15287),a.i(3626),a.i(65833),a.i(27135),a.i(13072),a.i(90266),a.i(61209),a.i(97549),a.i(66646),a.i(36185),a.i(61664),a.i(33082),a.i(42976),a.i(52290),a.i(89046),a.i(49839),a.i(53246),a.i(57634),a.i(74592),a.i(18476),a.i(81037),a.i(66798),a.i(96786),a.i(52567);var ar=ar,ar=ar,ar=ar;let cJ=ar.object({chatGroupId:ar.property("chat_group_id",ar.string()),chatId:ar.property("chat_id",ar.string()),configId:ar.property("config_id",ar.string().optional())});a.s(["WebhookEventBase",0,cJ],26581);var ar=ar;let cK=ar.enum_(["ACTIVE","USER_ENDED","USER_TIMEOUT","INACTIVITY_TIMEOUT","MAX_DURATION_TIMEOUT","SILENCE_TIMEOUT","ERROR"]);a.s(["WebhookEventChatStatus",0,cK],87064);let cL=ar.object({callerNumber:ar.property("caller_number",ar.string().optional()),customSessionId:ar.property("custom_session_id",ar.string().optional()),durationSeconds:ar.property("duration_seconds",ar.number()),endReason:ar.property("end_reason",cK),endTime:ar.property("end_time",ar.number()),eventName:ar.property("event_name",ar.stringLiteral("chat_ended").optional())}).extend(cJ);a.s(["WebhookEventChatEnded",0,cL],53915);var ar=ar,ar=ar;let cM=ar.enum_(["new_chat_group","resumed_chat_group"]);a.s(["WebhookEventChatStartType",0,cM],21704);let cN=ar.object({callerNumber:ar.property("caller_number",ar.string().optional()),chatStartType:ar.property("chat_start_type",cM),customSessionId:ar.property("custom_session_id",ar.string().optional()),eventName:ar.property("event_name",ar.stringLiteral("chat_started").optional()),startTime:ar.property("start_time",ar.number())}).extend(cJ);a.s(["WebhookEventChatStarted",0,cN],24749);var ar=ar;let cO=ar.object({callerNumber:ar.property("caller_number",ar.string().optional()),customSessionId:ar.property("custom_session_id",ar.string().optional()),eventName:ar.property("event_name",ar.stringLiteral("tool_call").optional()),timestamp:ar.number(),toolCallMessage:ar.property("tool_call_message",aO)}).extend(cJ);a.s(["WebhookEventToolCall",0,cO],27588);let cP=ar.undiscriminatedUnion([cN,cL,cO]);a.s(["WebhookEvent",0,cP],10499),a.i(10499),a.i(26581),a.i(53915),a.i(24749),a.i(21704),a.i(87064),a.i(27588),a.i(73002),a.s(["AssistantEnd",0,aL,"AssistantInput",0,as,"AssistantMessage",0,aT,"AssistantProsody",0,aU,"AudioConfiguration",0,ax,"AudioInput",0,at,"AudioOutput",0,aV,"BuiltInTool",0,ay,"BuiltinToolConfig",0,az,"ChatMessage",0,aP,"ChatMessageToolResult",0,aM,"ChatMetadata",0,aW,"ConnectSessionSettings",0,b$,"ConnectSessionSettingsAudio",0,bX,"ConnectSessionSettingsContext",0,bY,"ConnectSessionSettingsVariablesValue",0,bZ,"Context",0,aB,"ContextType",0,aA,"ControlPlanePublishEvent",0,b_,"EmotionScores",0,aQ,"Encoding",0,aw,"ErrorLevel",0,aG,"ErrorResponse",0,b0,"HttpValidationError",0,b3,"Inference",0,aS,"JsonMessage",0,b4,"LanguageModelType",0,a8,"MillisecondInterval",0,aY,"ModelProviderEnum",0,a9,"PauseAssistantMessage",0,au,"PostedBuiltinTool",0,a3,"PostedBuiltinToolName",0,a2,"PostedConfigPromptSpec",0,a4,"PostedEllmModel",0,a5,"PostedEventMessageSpec",0,a6,"PostedEventMessageSpecs",0,a7,"PostedLanguageModel",0,ba,"PostedNudgeSpec",0,bb,"PostedTimeoutSpec",0,b5,"PostedTimeoutSpecs",0,be,"PostedTimeoutSpecsInactivity",0,bc,"PostedTimeoutSpecsMaxDuration",0,bd,"PostedUserDefinedToolSpec",0,bf,"PostedWebhookEventType",0,bg,"PostedWebhookSpec",0,bh,"ProsodyInference",0,aR,"ResumeAssistantMessage",0,av,"ReturnBuiltinTool",0,b7,"ReturnBuiltinToolToolType",0,b6,"ReturnChat",0,ca,"ReturnChatAudioReconstruction",0,cc,"ReturnChatAudioReconstructionStatus",0,cb,"ReturnChatEvent",0,cf,"ReturnChatEventRole",0,cd,"ReturnChatEventType",0,ce,"ReturnChatGroup",0,cg,"ReturnChatGroupPagedAudioReconstructions",0,ci,"ReturnChatGroupPagedAudioReconstructionsPaginationDirection",0,ch,"ReturnChatGroupPagedChats",0,ck,"ReturnChatGroupPagedChatsPaginationDirection",0,cj,"ReturnChatGroupPagedEvents",0,cm,"ReturnChatGroupPagedEventsPaginationDirection",0,cl,"ReturnChatPagedEvents",0,cp,"ReturnChatPagedEventsPaginationDirection",0,cn,"ReturnChatPagedEventsStatus",0,co,"ReturnChatStatus",0,b8,"ReturnConfig",0,cA,"ReturnConfigSpec",0,b9,"ReturnEllmModel",0,cq,"ReturnEventMessageSpec",0,cr,"ReturnEventMessageSpecs",0,cs,"ReturnLanguageModel",0,ct,"ReturnNudgeSpec",0,cu,"ReturnPagedChatGroups",0,cC,"ReturnPagedChatGroupsPaginationDirection",0,cB,"ReturnPagedChats",0,cE,"ReturnPagedChatsPaginationDirection",0,cD,"ReturnPagedConfigs",0,cF,"ReturnPagedPrompts",0,cG,"ReturnPagedUserDefinedTools",0,cH,"ReturnPrompt",0,bx,"ReturnPromptVersionType",0,cI,"ReturnTimeoutSpec",0,cv,"ReturnTimeoutSpecs",0,cw,"ReturnUserDefinedTool",0,bN,"ReturnUserDefinedToolToolType",0,bL,"ReturnUserDefinedToolVersionType",0,bM,"ReturnVoice",0,cx,"ReturnWebhookEventType",0,cy,"ReturnWebhookSpec",0,cz,"Role",0,aN,"SessionSettings",0,aF,"SessionSettingsVariablesValue",0,aC,"SubscribeEvent",0,a_,"Tool",0,aE,"ToolCallMessage",0,aO,"ToolErrorMessage",0,aH,"ToolResponseMessage",0,aI,"ToolType",0,aD,"UserInput",0,aJ,"UserInterruption",0,aX,"UserMessage",0,aZ,"ValidationError",0,b2,"ValidationErrorLocItem",0,b1,"VoiceId",0,bj,"VoiceName",0,bk,"VoiceProvider",0,bi,"VoiceRef",0,bl,"WebSocketError",0,a$,"WebhookEvent",0,cP,"WebhookEventBase",0,cJ,"WebhookEventChatEnded",0,cL,"WebhookEventChatStartType",0,cM,"WebhookEventChatStarted",0,cN,"WebhookEventChatStatus",0,cK,"WebhookEventToolCall",0,cO],85943),a.i(85943),a.s(["AssistantEnd",0,aL,"AssistantInput",0,as,"AssistantMessage",0,aT,"AssistantProsody",0,aU,"AudioConfiguration",0,ax,"AudioInput",0,at,"AudioOutput",0,aV,"BuiltInTool",0,ay,"BuiltinToolConfig",0,az,"ChatMessage",0,aP,"ChatMessageToolResult",0,aM,"ChatMetadata",0,aW,"ChatSocketResponse",0,a0,"ConnectSessionSettings",0,b$,"ConnectSessionSettingsAudio",0,bX,"ConnectSessionSettingsContext",0,bY,"ConnectSessionSettingsVariablesValue",0,bZ,"Context",0,aB,"ContextType",0,aA,"ControlPlanePublishEvent",0,b_,"ControlPlaneSocketResponse",0,br,"EmotionScores",0,aQ,"Encoding",0,aw,"ErrorLevel",0,aG,"ErrorResponse",0,b0,"HttpValidationError",0,b3,"Inference",0,aS,"JsonMessage",0,b4,"LanguageModelType",0,a8,"MillisecondInterval",0,aY,"ModelProviderEnum",0,a9,"PauseAssistantMessage",0,au,"PostedBuiltinTool",0,a3,"PostedBuiltinToolName",0,a2,"PostedConfig",0,bm,"PostedConfigName",0,bn,"PostedConfigPromptSpec",0,a4,"PostedConfigVersion",0,bo,"PostedConfigVersionDescription",0,bp,"PostedEllmModel",0,a5,"PostedEventMessageSpec",0,a6,"PostedEventMessageSpecs",0,a7,"PostedLanguageModel",0,ba,"PostedNudgeSpec",0,bb,"PostedPrompt",0,bt,"PostedPromptName",0,bu,"PostedPromptVersion",0,bv,"PostedPromptVersionDescription",0,bw,"PostedTimeoutSpec",0,b5,"PostedTimeoutSpecs",0,be,"PostedTimeoutSpecsInactivity",0,bc,"PostedTimeoutSpecsMaxDuration",0,bd,"PostedUserDefinedTool",0,bH,"PostedUserDefinedToolName",0,bI,"PostedUserDefinedToolSpec",0,bf,"PostedUserDefinedToolVersion",0,bJ,"PostedUserDefinedToolVersionDescription",0,bK,"PostedWebhookEventType",0,bg,"PostedWebhookSpec",0,bh,"ProsodyInference",0,aR,"PublishEvent",0,aK,"ResumeAssistantMessage",0,av,"ReturnBuiltinTool",0,b7,"ReturnBuiltinToolToolType",0,b6,"ReturnChat",0,ca,"ReturnChatAudioReconstruction",0,cc,"ReturnChatAudioReconstructionStatus",0,cb,"ReturnChatEvent",0,cf,"ReturnChatEventRole",0,cd,"ReturnChatEventType",0,ce,"ReturnChatGroup",0,cg,"ReturnChatGroupPagedAudioReconstructions",0,ci,"ReturnChatGroupPagedAudioReconstructionsPaginationDirection",0,ch,"ReturnChatGroupPagedChats",0,ck,"ReturnChatGroupPagedChatsPaginationDirection",0,cj,"ReturnChatGroupPagedEvents",0,cm,"ReturnChatGroupPagedEventsPaginationDirection",0,cl,"ReturnChatPagedEvents",0,cp,"ReturnChatPagedEventsPaginationDirection",0,cn,"ReturnChatPagedEventsStatus",0,co,"ReturnChatStatus",0,b8,"ReturnConfig",0,cA,"ReturnConfigSpec",0,b9,"ReturnEllmModel",0,cq,"ReturnEventMessageSpec",0,cr,"ReturnEventMessageSpecs",0,cs,"ReturnLanguageModel",0,ct,"ReturnNudgeSpec",0,cu,"ReturnPagedChatGroups",0,cC,"ReturnPagedChatGroupsPaginationDirection",0,cB,"ReturnPagedChats",0,cE,"ReturnPagedChatsPaginationDirection",0,cD,"ReturnPagedConfigs",0,cF,"ReturnPagedPrompts",0,cG,"ReturnPagedUserDefinedTools",0,cH,"ReturnPrompt",0,bx,"ReturnPromptVersionType",0,cI,"ReturnTimeoutSpec",0,cv,"ReturnTimeoutSpecs",0,cw,"ReturnUserDefinedTool",0,bN,"ReturnUserDefinedToolToolType",0,bL,"ReturnUserDefinedToolVersionType",0,bM,"ReturnVoice",0,cx,"ReturnWebhookEventType",0,cy,"ReturnWebhookSpec",0,cz,"Role",0,aN,"SessionSettings",0,aF,"SessionSettingsVariablesValue",0,aC,"SubscribeEvent",0,a_,"Tool",0,aE,"ToolCallMessage",0,aO,"ToolErrorMessage",0,aH,"ToolResponseMessage",0,aI,"ToolType",0,aD,"UserInput",0,aJ,"UserInterruption",0,aX,"UserMessage",0,aZ,"ValidationError",0,b2,"ValidationErrorLocItem",0,b1,"VoiceId",0,bj,"VoiceName",0,bk,"VoiceProvider",0,bi,"VoiceRef",0,bl,"WebSocketError",0,a$,"WebhookEvent",0,cP,"WebhookEventBase",0,cJ,"WebhookEventChatEnded",0,cL,"WebhookEventChatStartType",0,cM,"WebhookEventChatStarted",0,cN,"WebhookEventChatStatus",0,cK,"WebhookEventToolCall",0,cO,"chat",()=>a1,"configs",()=>bq,"controlPlane",()=>bs,"prompts",()=>bG,"tools",()=>bW],55687);var cQ=a.i(55687),cQ=cQ,cR=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};class cS{constructor(a){this.eventHandlers={},this.handleOpen=()=>{var a,b;null==(b=(a=this.eventHandlers).open)||b.call(a)},this.handleMessage=a=>{var b,c,d,e;let f=JSON.parse(a.data,void 0),g=cQ.ChatSocketResponse.parse(f,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,omitUndefined:!0});g.ok?null==(c=(b=this.eventHandlers).message)||c.call(b,Object.assign(Object.assign({},g.value),{receivedAt:new Date})):null==(e=(d=this.eventHandlers).error)||e.call(d,Error("Received unknown message type"))},this.handleClose=a=>{var b,c;null==(c=(b=this.eventHandlers).close)||c.call(b,a)},this.handleError=a=>{var b,c;let d=a.message;null==(c=(b=this.eventHandlers).error)||c.call(b,Error(d))},this.socket=a.socket,this.socket.addEventListener("open",this.handleOpen),this.socket.addEventListener("message",this.handleMessage),this.socket.addEventListener("close",this.handleClose),this.socket.addEventListener("error",this.handleError)}get readyState(){return this.socket.readyState}on(a,b){this.eventHandlers[a]=b}sendPublish(a){this.assertSocketIsOpen();let b=aK.jsonOrThrow(a,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,omitUndefined:!0});this.socket.send(JSON.stringify(b))}sendAudioInput(a){this.sendPublish(Object.assign({type:"audio_input"},a))}sendSessionSettings(a={}){this.sendPublish(Object.assign({type:"session_settings"},a))}sendAssistantInput(a){this.sendPublish(Object.assign({type:"assistant_input"},a))}pauseAssistant(a={}){this.sendPublish(Object.assign({type:"pause_assistant_message"},a))}resumeAssistant(a={}){this.sendPublish(Object.assign({type:"resume_assistant_message"},a))}sendToolResponseMessage(a){this.sendPublish(Object.assign({type:"tool_response"},a))}sendToolErrorMessage(a){this.sendPublish(Object.assign({type:"tool_error"},a))}sendUserInput(a){this.sendPublish({type:"user_input",text:a})}connect(){return this.socket.reconnect(),this.socket.addEventListener("open",this.handleOpen),this.socket.addEventListener("message",this.handleMessage),this.socket.addEventListener("close",this.handleClose),this.socket.addEventListener("error",this.handleError),this}close(){this.socket.close(),this.handleClose({code:1e3}),this.socket.removeEventListener("open",this.handleOpen),this.socket.removeEventListener("message",this.handleMessage),this.socket.removeEventListener("close",this.handleClose),this.socket.removeEventListener("error",this.handleError)}waitForOpen(){return cR(this,void 0,void 0,function*(){return this.socket.readyState===p.OPEN?this.socket:new Promise((a,b)=>{this.socket.addEventListener("open",()=>{a(this.socket)}),this.socket.addEventListener("error",a=>{b(a)})})})}tillSocketOpen(){return cR(this,void 0,void 0,function*(){return this.waitForOpen()})}assertSocketIsOpen(){if(!this.socket)throw Error("Socket is not connected.");if(this.socket.readyState!==p.OPEN)throw Error("Socket is not open.")}sendBinary(a){this.socket.send(a)}}let cT={base:"https://api.hume.ai",evi:"wss://api.hume.ai/v0/evi",tts:"wss://api.hume.ai/v0/tts",stream:"wss://api.hume.ai/v0/stream"};function cU(a){if(null===a)return"null";switch(typeof a){case"undefined":return"undefined";case"string":case"number":case"boolean":break;default:a=String(a)}return encodeURIComponent(a)}function cV(a,...b){if(!a)return"";if(0===b.length)return a;if(a.includes("://")){let c;try{c=new URL(a)}catch(c){return cW(a,...b)}let d=b[b.length-1],e=null==d?void 0:d.endsWith("/");for(let a of b){let b=cY(a);b&&(c.pathname=cX(c.pathname,b))}return e&&!c.pathname.endsWith("/")&&(c.pathname+="/"),c.toString()}return cW(a,...b)}function cW(a,...b){if(0===b.length)return a;let c=a,d=b[b.length-1],e=null==d?void 0:d.endsWith("/");for(let a of b){let b=cY(a);b&&(c=cX(c,b))}return e&&!c.endsWith("/")&&(c+="/"),c}function cX(a,b){return a.endsWith("/")?a+b:`${a}/${b}`}function cY(a){if(!a)return a;let b=0,c=a.length;return a.startsWith("/")&&(b=1),a.endsWith("/")&&(c=a.length-1),0===b&&c===a.length?a:a.slice(b,c)}a.s([],43112),a.i(43112),a.s(["encodePathParam",()=>cU,"join",()=>cV,"toQueryString",()=>k],55706);var cZ=a.i(55706),cZ=cZ;let c$={get:a=>"function"==typeof a?a():a,map:(a,b)=>"function"==typeof a?()=>b(c$.get(a)):b(a)};var cQ=cQ;class c_{constructor(a={}){this._options=a}connect(a={}){var b,c;let{accessToken:d,configId:e,configVersion:f,eventLimit:g,resumedChatGroupId:h,verboseTranscription:i,voiceId:j,apiKey:k,sessionSettings:l,queryParams:m,headers:n,debug:o,reconnectAttempts:q,allowConnection:r}=a,s={};if(null!=d&&(s.access_token=d),null!=e&&(s.config_id=e),null!=f&&(s.config_version="number"==typeof f?f.toString():f),null!=g&&(s.event_limit=g.toString()),null!=h&&(s.resumed_chat_group_id=h),null!=i&&(s.verbose_transcription=i.toString()),null!=j&&(s.voice_id=j),null!=k&&(s.api_key=k),null!=r&&(s.allow_connection=!0===r?"true":"false"),null!=l&&(s.session_settings=cQ.ConnectSessionSettings.jsonOrThrow(l,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,omitUndefined:!0,breadcrumbsPrefix:["request","sessionSettings"]})),null!=m)for(let[a,b]of Object.entries(m))s[a]=b;let t=function(...a){let b={};for(let[c,d]of a.filter(a=>null!=a).flatMap(a=>Object.entries(a))){let a=c.toLowerCase();null!=d?b[a]=d:a in b&&delete b[a]}return b}(function(...a){let b={};for(let[c,d]of a.filter(a=>null!=a).flatMap(a=>Object.entries(a))){let a=c.toLowerCase();null!=d&&(b[a]=d)}return b}(Object.assign({},this._getCustomAuthorizationHeaders())),n);return new cS({socket:new p({url:cZ.join(null!=(b=c$.get(this._options.baseUrl))?b:(null!=(c=c$.get(this._options.environment))?c:cT).evi,"/chat"),protocols:[],queryParameters:s,headers:t,options:{debug:null!=o&&o,maxRetries:null!=q?q:30}})})}_getCustomAuthorizationHeaders(){var a;return{"X-Hume-Api-Key":c$.get(this._options.apiKey),Authorization:c$.get(null==(a=this._options.headers)?void 0:a.authorization)}}}a.s(["Chat",()=>c_,"ChatSocket",()=>cS],43373)}];

//# sourceMappingURL=_b821b86c._.js.map