(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70250,t=>{"use strict";function e(t,e){let i=window.atob(t),s=new Uint8Array(i.length);for(let t=0;t<i.length;t++)s[t]=i.charCodeAt(t);return new Blob([s],{type:e})}let i=[50,150,250,350,450,570,700,840,1e3,1170,1370,1600,1850,2150,2500,2900,3400,4e3,4800,5800,7e3,8500,10500,13500];function s(){return Array.from({length:24}).map(()=>0)}var n,h,a,f,r,l,o,u,d,c,p,m,v,w,y,g,k,M,A,E,b,W,x,C,T,B,z,I=function(t,e,i,s){return new(i||(i=Promise))(function(n,h){function a(t){try{r(s.next(t))}catch(t){h(t)}}function f(t){try{r(s.throw(t))}catch(t){h(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof i?e:new i(function(t){t(e)})).then(a,f)}r((s=s.apply(t,e||[])).next())})},P=function(t,e,i,s){if("a"===i&&!s)throw TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)},F=function(t,e,i,s,n){if("m"===s)throw TypeError("Private method is not writable");if("a"===s&&!n)throw TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i};class S extends EventTarget{get playing(){return P(this,p,"f")}get muted(){return P(this,m,"f")}get volume(){return P(this,v,"f")}get fft(){return P(this,y,"f")}constructor(t={}){var e,a,x;if(super(),n.add(this),this.opts=t,l.set(this,null),o.set(this,null),u.set(this,null),d.set(this,null),c.set(this,!1),p.set(this,!1),m.set(this,!1),v.set(this,void 0),w.set(this,void 0),y.set(this,s()),g.set(this,null),k.set(this,null),M.set(this,[]),A.set(this,null),E.set(this,!1),b.set(this,null),W.set(this,{}),F(this,v,null!=(e=t.volume)?e:1,"f"),F(this,w,null!=(a=t.disableAudioWorklet)&&a,"f"),null==(x=t.fft)?void 0:x.enabled){const{size:e,interval:s,transform:n}=t.fft;F(this,k,{size:null!=e?e:P(h,h,"f",f),interval:null!=s?s:P(h,h,"f",r),transform:null!=n?n:(t,e)=>{let s;return s=e/2/t.length,i.map(e=>{var i;let n=Math.round(e/s);return n>=0&&n<t.length?((null!=(i=t[n])?i:0)-0)/255*2:0})}},"f")}}on(t,e,i){return super.addEventListener(t,e,i),this}init(){return I(this,void 0,void 0,function*(){if(!P(this,c,"f")){F(this,l,new AudioContext,"f"),P(this,l,"f").audioWorklet||(console.warn("AudioWorklet is not supported in this browser. Falling back to Regular Buffer Mode."),F(this,w,!0,"f"));try{if(F(this,d,P(this,l,"f").createGain(),"f"),P(this,d,"f").gain.value=P(this,v,"f"),P(this,k,"f")?(F(this,u,P(this,l,"f").createAnalyser(),"f"),P(this,u,"f").fftSize=P(this,k,"f").size):(F(this,u,P(this,l,"f").createAnalyser(),"f"),P(this,u,"f").fftSize=P(h,h,"f",f)),P(this,w,"f")){let t=P(this,u,"f"),e=P(this,d,"f"),i=P(this,l,"f").destination;[t,e,i].filter(Boolean).reduce((t,e)=>(t.connect(e),e))}else{yield P(this,l,"f").audioWorklet.addModule(P(h,h,"f",a)),F(this,o,new AudioWorkletNode(P(this,l,"f"),"audio-processor"),"f"),P(this,o,"f").port.onmessage=t=>{"ended"===t.data.type&&(F(this,p,!1,"f"),this.dispatchEvent(new CustomEvent("stop",{detail:{id:"stream"}})))};let t=P(this,o,"f"),e=P(this,u,"f"),i=P(this,d,"f"),s=P(this,l,"f").destination;[t,e,i,s].filter(Boolean).reduce((t,e)=>(t.connect(e),e))}P(this,n,"m",x).call(this),yield P(this,l,"f").resume(),F(this,c,!0,"f")}catch(e){let t=e instanceof Error?`: ${e.message}`:String(e);throw P(this,n,"m",C).call(this,`Failed to initialize audio player${t}`),e}}})}enqueue(t){return I(this,void 0,void 0,function*(){if(!P(this,c,"f")||!P(this,l,"f"))return void P(this,n,"m",C).call(this,"Audio player is not initialized");if(P(this,w,"f"))try{let e=yield P(this,n,"m",T).call(this,t);if(!e)return void P(this,n,"m",C).call(this,"Failed to convert data to audio buffer");let i=P(this,n,"m",B).call(this,t,e);if(0===i.length)return;for(let t of i)P(this,M,"f").push({id:t.id,buffer:t.buffer,index:t.index}),1===P(this,M,"f").length&&P(this,n,"m",z).call(this)}catch(e){let t=e instanceof Error?e.message:"Unknown error";P(this,n,"m",C).call(this,`Failed to add clip to queue: ${t}`)}else try{let{data:i,id:s}=t,n=e(i),h=yield n.arrayBuffer(),a=(yield P(this,l,"f").decodeAudioData(h)).getChannelData(0);P(this,o,"f").port.postMessage({type:"audio",data:a}),F(this,p,!0,"f"),this.dispatchEvent(new CustomEvent("play",{detail:{id:s}}))}catch(e){let t=e instanceof Error?e.message:"Unknown error";P(this,n,"m",C).call(this,`Failed to queue clip: ${t}`)}})}stop(){var t;P(this,w,"f")?(P(this,A,"f")&&(P(this,A,"f").stop(),P(this,A,"f").disconnect(),F(this,A,null,"f")),F(this,M,[],"f"),F(this,E,!1,"f")):null==(t=P(this,o,"f"))||t.port.postMessage({type:"fadeAndClear"}),P(this,n,"m",x).call(this),F(this,p,!1,"f"),this.dispatchEvent(new CustomEvent("stop",{detail:{id:"manual"}}))}setVolume(t){let e=Math.max(0,Math.min(t,1));F(this,v,e,"f"),P(this,d,"f")&&P(this,l,"f")&&!P(this,m,"f")&&P(this,d,"f").gain.setValueAtTime(e,P(this,l,"f").currentTime)}mute(){P(this,d,"f")&&P(this,l,"f")&&(P(this,d,"f").gain.setValueAtTime(0,P(this,l,"f").currentTime),F(this,m,!0,"f"))}unmute(){P(this,d,"f")&&P(this,l,"f")&&(P(this,d,"f").gain.setValueAtTime(P(this,v,"f"),P(this,l,"f").currentTime),F(this,m,!1,"f"))}dispose(){var t,e,i,n,h,a,f;null!=P(this,g,"f")&&(clearInterval(P(this,g,"f")),F(this,g,null,"f")),P(this,w,"f")?(P(this,A,"f")&&(P(this,A,"f").stop(),P(this,A,"f").disconnect(),F(this,A,null,"f")),F(this,M,[],"f"),F(this,E,!1,"f")):(null==(t=P(this,o,"f"))||t.port.postMessage({type:"fadeAndClear"}),null==(e=P(this,o,"f"))||e.port.postMessage({type:"end"}),null==(i=P(this,o,"f"))||i.port.close(),null==(n=P(this,o,"f"))||n.disconnect()),null==(h=P(this,u,"f"))||h.disconnect(),null==(a=P(this,d,"f"))||a.disconnect(),null==(f=P(this,l,"f"))||f.close().catch(()=>void 0),F(this,c,!1,"f"),F(this,p,!1,"f"),F(this,y,s(),"f")}}h=S,l=new WeakMap,o=new WeakMap,u=new WeakMap,d=new WeakMap,c=new WeakMap,p=new WeakMap,m=new WeakMap,v=new WeakMap,w=new WeakMap,y=new WeakMap,g=new WeakMap,k=new WeakMap,M=new WeakMap,A=new WeakMap,E=new WeakMap,b=new WeakMap,W=new WeakMap,n=new WeakSet,x=function(){if(!P(this,k,"f")||!P(this,u,"f"))return;P(this,g,"f")&&clearInterval(P(this,g,"f"));let{interval:t,transform:e}=P(this,k,"f");F(this,g,window.setInterval(()=>{let t=new Uint8Array(P(this,u,"f").frequencyBinCount);P(this,u,"f").getByteFrequencyData(t),F(this,y,e(t,P(this,l,"f").sampleRate),"f"),this.dispatchEvent(new CustomEvent("fft",{detail:{fft:P(this,y,"f")}}))},t),"f")},C=function(t){this.dispatchEvent(new CustomEvent("error",{detail:{message:t}}))},T=function(t){return I(this,void 0,void 0,function*(){if(!P(this,c,"f")||!P(this,l,"f"))return void P(this,n,"m",C).call(this,"Audio player has not been initialized");let i=e(t.data),s=yield i.arrayBuffer();return yield P(this,l,"f").decodeAudioData(s)})},B=function(t,e){var i,s;if("__proto__"===t.id||"constructor"===t.id||"prototype"===t.id)return P(this,n,"m",C).call(this,`Attempted to use a dangerous property name as message ID: ${t.id}`),[];if(P(this,W,"f")[t.id]||(P(this,W,"f")[t.id]=[]),!Number.isInteger(t.index)||t.index<0)return P(this,n,"m",C).call(this,`Attempted to use an invalid index: ${t.index}`),[];let h=P(this,W,"f")[t.id]||[];h[t.index]=e;let a=null==(i=P(this,b,"f"))?void 0:i.id,f=[];if(t.id!==a)if(!h[0])return[];else F(this,b,{id:t.id,index:0},"f"),f.push({id:t.id,index:0,buffer:h[0]}),h[0]=void 0;let r=((null==(s=P(this,b,"f"))?void 0:s.index)||0)+1,l=h[r];for(;l;)f.push({index:r,buffer:l,id:t.id}),h[r]=void 0,F(this,b,{id:t.id,index:r},"f"),r+=1,l=h[r];return f},z=function t(){var e,i;if(0===P(this,M,"f").length||P(this,E,"f"))return;if(null===P(this,u,"f")||null===P(this,l,"f"))return void P(this,n,"m",C).call(this,"Audio player is not initialized");let h=P(this,M,"f").shift();if(!h)return;F(this,E,!0,"f"),F(this,p,!0,"f");let a=P(this,l,"f").createBufferSource();a.buffer=h.buffer,P(this,u,"f")&&a.connect(P(this,u,"f")),P(this,d,"f")?(null==(e=P(this,u,"f"))||e.connect(P(this,d,"f")),P(this,d,"f").connect(P(this,l,"f").destination)):null==(i=P(this,u,"f"))||i.connect(P(this,l,"f").destination),F(this,A,a,"f"),P(this,n,"m",x).call(this),a.start(0),0===h.index&&this.dispatchEvent(new CustomEvent("play",{detail:{id:h.id}})),a.onended=()=>{P(this,g,"f")&&(clearInterval(P(this,g,"f")),F(this,g,null,"f")),F(this,y,s(),"f"),a.disconnect(),F(this,E,!1,"f"),F(this,p,!1,"f"),this.dispatchEvent(new CustomEvent("stop",{detail:{id:h.id}})),F(this,A,null,"f"),P(this,n,"m",t).call(this)}},a={value:"https://storage.googleapis.com/evi-react-sdk-assets/audio-worklet-20250506.js"},f={value:2048},r={value:16},t.s(["EVIWebAudioPlayer",()=>S],70250)}]);